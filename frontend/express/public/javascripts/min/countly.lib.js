/*! Countly 24-09-2015 */
!function(a,b){function c(){var a={cols:[],rows:[]};d=new google.visualization.GeoChart(document.getElementById(f)),a.cols=[{id:"country",label:jQuery.i18n.map["countries.table.country"],type:"string"},{id:"total",label:jQuery.i18n.map["common.total"],type:"number"}],a.rows=_.map(h,function(a){return a.country=i[a.country]||"Unknown","European Union"==a.country||"Unknown"==a.country?{c:[{v:""},{v:a.value}]}:{c:[{v:a.country},{v:a.value}]}}),e=new google.visualization.DataTable(a),g.region="world",g.resolution="countries",g.displayMode="region",d.draw(e,g)}var d,e,f="geo-chart",g={displayMode:"region",colorAxis:{minValue:0,colors:["#D7F1D8","#6BB96E"]},resolution:"countries",toolTip:{textStyle:{color:"#FF0000"},showColorCode:!1},legend:"none",backgroundColor:"transparent",datalessRegionColor:"#FFF"},h=[],i={};b.get("localization/countries/en/country.json",function(a){i=a}),a.drawGeoChart=function(a,b){a&&(a.chartElementId&&(f=a.chartElementId),a.height&&(g.height=a.height,g.width=556*a.height/347)),h=b,google.visualization?c():google.load("visualization","1",{packages:["geochart"],callback:c})}}(window.countlyMapHelper=window.countlyMapHelper||{},jQuery),function(a,b,c){function d(){l=f.meta||{},j=l.segments||[],j&&j.sort(),k=l[i]?l[i]:[]}function e(){for(var a in f.meta)l[a]=countlyCommon.union(l[a],f.meta[a]);j=l.segments,j&&j.sort(),k=l[i]?l[i]:[]}var f={},g={},h="",i="",j=[],k=[],l={},m=0,n=!1,o=null;a.initialize=function(c){return!c&&n&&o==countlyCommon.getPeriodForAjax()&&m==countlyCommon.ACTIVE_APP_KEY?a.refresh():(o=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?(f={2012:{}},!0):(m=countlyCommon.ACTIVE_APP_KEY,n=!0,b.when(b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"get_events",period:o},dataType:"jsonp",success:function(b){g=b,!h&&a.getEvents()[0]&&(h=a.getEvents()[0].key)}}),b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"events",event:h,segmentation:i,period:o},dataType:"jsonp",success:function(a){f=a,d()}})).then(function(){return!0})))},a.refresh=function(){return countlyCommon.DEBUG?(f={2012:{}},!0):b.when(b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"get_events"},dataType:"jsonp",success:function(b){g=b,!h&&a.getEvents()[0]&&(h=a.getEvents()[0].key)}}),b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"events",action:"refresh",event:h,segmentation:i},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(f,a),e()}})).then(function(){return!0})},a.reset=function(){f={},g={},h="",i="",j=[],k=[],l={},m=0,n=!1},a.refreshEvents=function(){return countlyCommon.DEBUG?(g={},!0):void b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"get_events"},dataType:"jsonp",success:function(b){g=b,!h&&a.getEvents()[0]&&(h=a.getEvents()[0].key)}})},a.setActiveEvent=function(c,d){f={},i="",j=[],k=[],l={},h=c,b.when(a.initialize(!0)).then(d)},a.setActiveSegmentation=function(c,d){f={},i=c,b.when(a.initialize(!0)).then(d)},a.getActiveSegmentation=function(){return i?i:jQuery.i18n.map["events.no-segmentation"]},a.isSegmentedView=function(){return i?!0:!1},a.getEventData=function(){var b={},d=g&&g.map?g.map:{},e=d[h]&&d[h].count?d[h].count:jQuery.i18n.map["events.table.count"],j=d[h]&&d[h].sum?d[h].sum:jQuery.i18n.map["events.table.sum"];if(i){b={chartData:{},chartDP:{dp:[],ticks:[]}};var l=countlyCommon.extractTwoLevelData(f,k,a.clearEventsObject,[{name:"curr_segment",func:function(a){return a.replace(/:/g,".").replace(/\[CLY\]/g,"")}},{name:"c"},{name:"s"}]);b.chartData=l.chartData;var m=_.pluck(b.chartData,"curr_segment").slice(0,15),n=_.pluck(b.chartData,"c"),o=_.without(_.pluck(b.chartData,"s"),!1,null,"",c,0/0),p=[{data:[],color:countlyCommon.GRAPH_COLORS[0]}];0==_.reduce(o,function(a,b){return a+b},0)&&(o=[]),o.length&&(p[p.length]={data:[],color:countlyCommon.GRAPH_COLORS[1]},p[1].data[0]=[-1,null],p[1].data[m.length+1]=[m.length,null]),p[0].data[0]=[-1,null],p[0].data[m.length+1]=[m.length,null],b.chartDP.ticks.push([-1,""]),b.chartDP.ticks.push([m.length,""]);for(var q=0;q<m.length;q++)p[0].data[q+1]=[q,n[q]],o.length&&(p[1].data[q+1]=[q,o[q]]),b.chartDP.ticks.push([q,m[q]]);b.chartDP.dp=p,b.eventName=a.getEventLongName(h),b.dataLevel=2,b.tableColumns=[jQuery.i18n.map["events.table.segmentation"],e],o.length?b.tableColumns[b.tableColumns.length]=j:_.each(b.chartData,function(a,b,c){c[b]=_.pick(a,"curr_segment","c")})}else{var r=[{data:[],label:e,color:countlyCommon.GRAPH_COLORS[0]},{data:[],label:j,color:countlyCommon.GRAPH_COLORS[1]}],s=[{name:"c"},{name:"s"}];b=countlyCommon.extractChartData(f,a.clearEventsObject,r,s),b.eventName=a.getEventLongName(h),b.dataLevel=1,b.tableColumns=[jQuery.i18n.map["common.date"],e];var t=_.without(_.pluck(b.chartData,"s"),!1,null,"",c,0/0);0!=_.reduce(t,function(a,b){return a+b},0)?b.tableColumns[b.tableColumns.length]=j:(b.chartDP[1]=!1,b.chartDP=_.compact(b.chartDP),_.each(b.chartData,function(a,b,c){c[b]=_.pick(a,"date","c")}))}var u=_.pluck(b.chartData,"c");u.length&&(b.totalCount=_.reduce(u,function(a,b){return a+b},0));var v=_.pluck(b.chartData,"s");return v.length&&(b.totalSum=_.reduce(v,function(a,b){return a+b},0)),b},a.getEvents=function(){for(var a=g&&g.list?g.list:[],b=g&&g.map?g.map:{},c=g&&g.order?g.order:[],d=[],e=[],f=0;f<a.length;f++){var i=e;-1!==c.indexOf(a[f])&&(i=d),i.push(b[a[f]]&&b[a[f]].name?{key:a[f],name:b[a[f]].name,count:b[a[f]].count,sum:b[a[f]].sum,is_active:h==a[f]}:{key:a[f],name:a[f],count:"",sum:"",is_active:h==a[f]})}return d=_.sortBy(d,function(a){return c.indexOf(a.key)}),e=_.sortBy(e,function(a){return a.key}),d.concat(e)},a.getEventsWithSegmentations=function(){var a=g&&g.segments?g.segments:[],b=g&&g.map?g.map:{},c=[];for(var d in a){c.push(b[d]&&b[d].name?{key:d,name:b[d].name}:{key:d,name:d});for(var e=0;e<a[d].length;e++)c.push(b[d]&&b[d].name?{key:d,name:b[d].name+" / "+a[d][e]}:{key:d,name:d+" / "+a[d][e]})}return c},a.getEventMap=function(){for(var b=a.getEvents(),c={},d=0;d<b.length;d++)c[b[d].key]=b[d];return c},a.getEventLongName=function(a){var b=g&&g.map?g.map:{};return b[a]&&b[a].name?b[a].name:a},a.getEventSegmentations=function(){return j},a.clearEventsObject=function(a){return a?(a.c||(a.c=0),a.s||(a.s=0)):a={c:0,s:0},a},a.getEventSummary=function(){_periodObj=countlyCommon.periodObj;var b,c,d={},e=0,j=0,l=0,m=0;if(_periodObj.isSpecialPeriod)for(var n=0;n<_periodObj.currentPeriodArr.length;n++){if(b=countlyCommon.getDescendantProp(f,_periodObj.currentPeriodArr[n]),c=countlyCommon.getDescendantProp(f,_periodObj.previousPeriodArr[n]),b=a.clearEventsObject(b),c=a.clearEventsObject(c),i){var o=_.reduce(_.map(_.filter(b,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.c||0}),function(a,b){return a+b},0),p=_.reduce(_.map(_.filter(b,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.s||0}),function(a,b){return a+b},0),q=_.reduce(_.map(_.filter(c,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.c||0}),function(a,b){return a+b},0),r=_.reduce(_.map(_.filter(c,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.s||0}),function(a,b){return a+b},0);b={c:o,s:p},c={c:q,s:r}}e+=b.c,j+=c.c,l+=b.s,m+=c.s}else{if(b=countlyCommon.getDescendantProp(f,_periodObj.activePeriod),c=countlyCommon.getDescendantProp(f,_periodObj.previousPeriod),b=a.clearEventsObject(b),c=a.clearEventsObject(c),i){var o=_.reduce(_.map(_.filter(b,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.c||0}),function(a,b){return a+b},0),p=_.reduce(_.map(_.filter(b,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.s||0}),function(a,b){return a+b},0),q=_.reduce(_.map(_.filter(c,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.c||0}),function(a,b){return a+b},0),r=_.reduce(_.map(_.filter(c,function(a,b){return-1!=k.indexOf(b)}),function(a){return a.s||0}),function(a,b){return a+b},0);b={c:o,s:p},c={c:q,s:r}}e=b.c,j=c.c,l=b.s,m=c.s}var s=countlyCommon.getPercentChange(j,e),t=countlyCommon.getPercentChange(m,l);d={usage:{"event-total":{total:e,change:s.percent,trend:s.trend},"event-sum":{total:l,change:t.percent,trend:t.trend}}};var u=g&&g.map?g.map:{},v=u[h]&&u[h].count?u[h].count.toUpperCase():jQuery.i18n.map["events.count"],w=u[h]&&u[h].sum?u[h].sum.toUpperCase():jQuery.i18n.map["events.sum"],x={"class":"one-column",items:[{title:v,total:d.usage["event-total"].total,trend:d.usage["event-total"].trend}]};return 0!=l&&(x["class"]="two-column",x.items[x.items.length]={title:w,total:d.usage["event-sum"].total,trend:d.usage["event-sum"].trend}),x},a.getMultiEventData=function(d,e){function f(b){var d={},e=g&&g.map?g.map:{},f=e[h]&&e[h].count?e[h].count:jQuery.i18n.map["events.table.count"],i=e[h]&&e[h].sum?e[h].sum:jQuery.i18n.map["events.table.sum"],j=[{data:[],label:f,color:countlyCommon.GRAPH_COLORS[0]},{data:[],label:i,color:countlyCommon.GRAPH_COLORS[1]}],k=[{name:"c"},{name:"s"}];d=countlyCommon.extractChartData(b,a.clearEventsObject,j,k),d.eventName=a.getEventLongName(h),d.dataLevel=1,d.tableColumns=[jQuery.i18n.map["common.date"],f];var l=_.without(_.pluck(d.chartData,"s"),!1,null,"",c,0/0);0!=_.reduce(l,function(a,b){return a+b},0)?d.tableColumns[d.tableColumns.length]=i:(d.chartDP[1]=!1,d.chartDP=_.compact(d.chartDP),_.each(d.chartData,function(a,b,c){c[b]=_.pick(a,"date","c")}));var m=_.pluck(d.chartData,"c");m.length&&(d.totalCount=_.reduce(m,function(a,b){return a+b},0));var n=_.pluck(d.chartData,"s");return n.length&&(d.totalSum=_.reduce(n,function(a,b){return a+b},0)),d}b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"events",events:JSON.stringify(d)},dataType:"jsonp",success:function(a){e(f(a))}})}}(window.countlyEvent=window.countlyEvent||{},jQuery),function(a){function b(){var b={total:[],nev:[],unique:[],returning:[],"total-time":[],"avg-time":[],events:[],"avg-events":[],msg:[]};if(e.isSpecialPeriod)for(var c=0;c<e.currentPeriodArr.length;c++){var d=countlyCommon.getDescendantProp(f,e.currentPeriodArr[c]);d=a.clearSessionObject(d),b.total[b.total.length]=d.t,b.nev[b.nev.length]=d.n,b.unique[b.unique.length]=d.u,b.returning[b.returning.length]=d.t-d.n,b["total-time"][b["total-time"].length]=d.d,b["avg-time"][b["avg-time"].length]=0==d.t?0:d.d/d.t,b.events[b.events.length]=d.e,b["avg-events"][b["avg-events"].length]=0==d.u?0:d.e/d.u,b.msg[b.msg.length]=d.m}else for(var c=e.periodMin;c<e.periodMax+1;c++){var d=countlyCommon.getDescendantProp(f,e.activePeriod+"."+c);d=a.clearSessionObject(d),b.total[b.total.length]=d.t,b.nev[b.nev.length]=d.n,b.unique[b.unique.length]=d.u,b.returning[b.returning.length]=d.t-d.n,b["total-time"][b["total-time"].length]=d.d,b["avg-time"][b["avg-time"].length]=0==d.t?0:d.d/d.t,b.events[b.events.length]=d.e,b["avg-events"][b["avg-events"].length]=0==d.u?0:d.e/d.u,b.msg[b.msg.length]=d.m}for(var g in b)b[g]=b[g].join(",");return b}function c(){g=f.meta&&f.meta["d-ranges"]?f.meta["d-ranges"]:[]}function d(){f.meta&&(g=countlyCommon.union(g,f.meta["d-ranges"]))}var e={},f={},g=[];a.initialize=function(){f=countlyUser.getDbObj(),c()},a.refresh=function(a){countlyCommon.extendDbObj(f,a),d()},a.reset=function(){f={},c()},a.getSessionData=function(){e=countlyCommon.periodObj;var c,d,g={},h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=!1;if(e.isSpecialPeriod){v=!0;for(var w=0;w<e.uniquePeriodArr.length;w++)c=countlyCommon.getDescendantProp(f,e.uniquePeriodArr[w]),c=a.clearSessionObject(c),p+=c.u,j+=c.p,l+=c.m;for(var x,y=0,z=0,A=0,w=0;w<e.uniquePeriodCheckArr.length;w++)x=countlyCommon.getDescendantProp(f,e.uniquePeriodCheckArr[w]),x=a.clearSessionObject(x),y+=x.u,z+=x.p,A+=x.m;p>y&&(p=y),j>z&&(j=z),l>A&&(l=A);for(var w=0;w<e.previousUniquePeriodArr.length;w++)d=countlyCommon.getDescendantProp(f,e.previousUniquePeriodArr[w]),d=a.clearSessionObject(d),q+=d.u,k+=d.p,m+=d.m;for(var B,C=0,D=0,E=0,w=0;w<e.previousUniquePeriodCheckArr.length;w++)B=countlyCommon.getDescendantProp(f,e.previousUniquePeriodCheckArr[w]),B=a.clearSessionObject(B),C+=B.u,D+=B.p,E+=B.m;q>C&&(q=C),k>D&&(k=D),l>A&&(l=A);for(var w=0;w<e.currentPeriodArr.length;w++)c=countlyCommon.getDescendantProp(f,e.currentPeriodArr[w]),d=countlyCommon.getDescendantProp(f,e.previousPeriodArr[w]),c=a.clearSessionObject(c),d=a.clearSessionObject(d),h+=c.t,i+=d.t,n+=c.n,o+=d.n,r+=c.d,s+=d.d,t+=c.e,u+=d.e}else c=countlyCommon.getDescendantProp(f,e.activePeriod),d=countlyCommon.getDescendantProp(f,e.previousPeriod),c=a.clearSessionObject(c),d=a.clearSessionObject(d),h=c.t,i=d.t,n=c.n,o=d.n,p=c.u,q=d.u,r=c.d,s=d.d,t=c.e,u=d.e,j=c.p,k=d.p,l=c.m,m=d.m;var F=r/60,G=s/60,H=0==i?0:G/i,I=0==h?0:F/h,J=0==q?0:u/q,K=0==p?0:t/p,L=countlyCommon.getPercentChange(i,h),M=countlyCommon.getPercentChange(s,r),N=countlyCommon.getPercentChange(H,I),O=countlyCommon.getPercentChange(o,n),P=countlyCommon.getPercentChange(q,p),Q=countlyCommon.getPercentChange(q-o,n-n),R=countlyCommon.getPercentChange(u,t),S=countlyCommon.getPercentChange(J,K),T=countlyCommon.getPercentChange(k,j),U=countlyCommon.getPercentChange(m,l),V=b(),W=countlyCommon.timeString(F);return g={usage:{"total-sessions":{total:h,change:L.percent,trend:L.trend,sparkline:V.total},"paying-users":{total:j,"prev-total":k,change:T.percent,trend:T.trend,isEstimate:v},"total-users":{total:p,"prev-total":q,change:P.percent,trend:P.trend,sparkline:V.unique,isEstimate:v},"messaging-users":{total:l,"prev-total":m,change:U.percent,trend:U.trend,sparkline:V.msg,isEstimate:v},"new-users":{total:n,change:O.percent,trend:O.trend,sparkline:V.nev},"returning-users":{total:p-n,change:Q.percent,trend:Q.trend,sparkline:V.returning},"total-duration":{total:W,change:M.percent,trend:M.trend,sparkline:V["total-time"]},"avg-duration-per-session":{total:countlyCommon.timeString(I),change:N.percent,trend:N.trend,sparkline:V["avg-time"]},events:{total:t,change:R.percent,trend:R.trend,sparkline:V.events},"avg-events":{total:K.toFixed(1),change:S.percent,trend:S.trend,sparkline:V["avg-events"]}}}},a.getDurationData=function(){var b={chartData:{},chartDP:{dp:[],ticks:[]}};b.chartData=countlyCommon.extractRangeData(f,"ds",g,a.explainDurationRange);var c=_.pluck(b.chartData,"ds"),d=_.pluck(b.chartData,"t"),e=[{data:[]}];e[0].data[0]=[-1,null],e[0].data[c.length+1]=[c.length,null],b.chartDP.ticks.push([-1,""]),b.chartDP.ticks.push([c.length,""]);for(var h=0;h<c.length;h++)e[0].data[h+1]=[h,d[h]],b.chartDP.ticks.push([h,c[h]]);b.chartDP.dp=e;for(var h=0;h<b.chartData.length;h++)b.chartData[h].percent="<div class='percent-bar' style='width:"+2*b.chartData[h].percent+"px;'></div>"+b.chartData[h].percent+"%";return b},a.getSessionDP=function(){var b=[{data:[],label:jQuery.i18n.map["common.table.total-sessions"]},{data:[],label:jQuery.i18n.map["common.table.new-sessions"]},{data:[],label:jQuery.i18n.map["common.table.unique-sessions"]}],c=[{name:"t"},{name:"n"},{name:"u"}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getSessionDPTotal=function(){var b=[{data:[],label:jQuery.i18n.map["common.table.total-sessions"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.table.total-sessions"],color:"#333933"}],c=[{name:"pt",func:function(a){return a.t},period:"previous"},{name:"t"}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getUserDP=function(){var b=[{data:[],label:jQuery.i18n.map["common.table.total-users"]},{data:[],label:jQuery.i18n.map["common.table.new-users"]},{data:[],label:jQuery.i18n.map["common.table.returning-users"]}],c=[{name:"u"},{name:"n"},{name:"returning",func:function(a){return a.u-a.n}}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getUserDPActive=function(){var b=[{data:[],label:jQuery.i18n.map["common.table.total-users"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.table.total-users"],color:"#333933"}],c=[{name:"pt",func:function(a){return a.u},period:"previous"},{name:"t",func:function(a){return a.u}}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getUserDPNew=function(){var b=[{data:[],label:jQuery.i18n.map["common.table.new-users"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.table.new-users"],color:"#333933"}],c=[{name:"pn",func:function(a){return a.n},period:"previous"},{name:"n"}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getMsgUserDPActive=function(){var b=[{data:[],label:jQuery.i18n.map["common.table.total-users"],color:countlyCommon.GRAPH_COLORS[0]},{data:[],label:jQuery.i18n.map["common.table.messaging-users"],color:countlyCommon.GRAPH_COLORS[1]}],c=[{name:"u"},{name:"m"}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getDurationDP=function(){var b=[{data:[],label:jQuery.i18n.map["common.graph.time-spent"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.time-spent"],color:"#333933"}],c=[{name:"previous_t",func:function(a){return(a.d/60).toFixed(1)},period:"previous"},{name:"t",func:function(a){return(a.d/60).toFixed(1)}}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getDurationDPAvg=function(){var b=[{data:[],label:jQuery.i18n.map["common.graph.average-time"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.average-time"],color:"#333933"}],c=[{name:"previous_average",func:function(a){return 0==a.t?0:(a.d/a.t/60).toFixed(1)},period:"previous"},{name:"average",func:function(a){return 0==a.t?0:(a.d/a.t/60).toFixed(1)}}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getEventsDP=function(){var b=[{data:[],label:jQuery.i18n.map["common.graph.reqs-received"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.reqs-received"],color:"#333933"}],c=[{name:"pe",func:function(a){return a.e},period:"previous"},{name:"e"}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.getEventsDPAvg=function(){var b=[{data:[],label:jQuery.i18n.map["common.graph.avg-reqs-received"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.avg-reqs-received"],color:"#333933"}],c=[{name:"previous_average",func:function(a){return 0==a.u?0:(a.e/a.u).toFixed(1)},period:"previous"},{name:"average",func:function(a){return 0==a.u?0:(a.e/a.u).toFixed(1)}}];return countlyCommon.extractChartData(f,a.clearSessionObject,b,c)},a.clearSessionObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0),a.d||(a.d=0),a.e||(a.e=0),a.p||(a.p=0),a.m||(a.m=0)):a={t:0,n:0,u:0,d:0,e:0,p:0,m:0},a},a.explainDurationRange=function(a){var b=jQuery.i18n.map["common.seconds"],c=jQuery.i18n.map["common.minutes"],d=jQuery.i18n.map["common.hour"],e=["0-10 "+b,"11-30 "+b,"31-60 "+b,"1-3 "+c,"3-10 "+c,"10-30 "+c,"30-60 "+c,"> 1 "+d];return e[a]},a.getDurationIndex=function(a){var b=jQuery.i18n.map["common.seconds"],c=jQuery.i18n.map["common.minutes"],d=jQuery.i18n.map["common.hour"],e=["0-10 "+b,"11-30 "+b,"31-60 "+b,"1-3 "+c,"3-10 "+c,"10-30 "+c,"30-60 "+c,"> 1 "+d];return e.indexOf(a)},a.getTopUserBars=function(){var b=[],c=0,d=3,e=0,g=[{data:[],label:jQuery.i18n.map["common.table.total-users"]}],h=[{name:"t",func:function(a){return a.u}}],i=countlyCommon.extractChartData(f,a.clearSessionObject,g,h),j=_.sortBy(_.reject(i.chartData,function(a){return 0==a.t}),function(a){return-a.t});j.length<3&&(d=j.length);for(var k=0;d>k;k++)c+=j[k].t;for(var k=0;d>k;k++){var l=Math.floor(j[k].t/c*100);e+=l,k==d-1&&(l+=100-e),b[k]={name:j[k].date,percent:l}}return b},a.getSessionDb=function(){return f}}(window.countlySession=window.countlySession||{},jQuery),function(a,b){function c(b){b=b||{id:"total",label:jQuery.i18n.map["sidebar.analytics.sessions"],type:"number",metric:"t"};var c={cols:[],rows:[]};f=new google.visualization.GeoChart(document.getElementById(l));var d=countlyCommon.extractTwoLevelData(i,k,a.clearLocationObject,[{name:"city",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]);c.cols=[{id:"city",label:"City",type:"string"}],c.cols.push(b),c.rows=_.map(d.chartData,function(a){return"Unknown"==a.city?{c:[{v:""},{v:a[b.metric]}]}:{c:[{v:a.city},{v:a[b.metric]}]}}),g=new google.visualization.DataTable(c),countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].country&&(m.region=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].country),m.resolution="countries",m.displayMode="markers",f.draw(g,m)}function d(b){b=b||{id:"total",label:jQuery.i18n.map["sidebar.analytics.sessions"],type:"number",metric:"t"};var c={cols:[],rows:[]},d=countlyCommon.extractTwoLevelData(i,k,a.clearLocationObject,[{name:"city",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]);c.cols=[{id:"city",label:"City",type:"string"}],c.cols.push(b),c.rows=_.map(d.chartData,function(a){return"Unknown"==a.city?{c:[{v:""},{v:a[b.metric]}]}:{c:[{v:a.city},{v:a[b.metric]}]}}),g=new google.visualization.DataTable(c),f.draw(g,m)}function e(){k=i.meta&&i.meta.cities?i.meta.cities:[]}var f,g,h={},i={},j=0,k=[],l="geo-chart",m={displayMode:"markers",colorAxis:{minValue:0,colors:["#D7F1D8","#6BB96E"]},resolution:"countries",toolTip:{textStyle:{color:"#FF0000"},showColorCode:!1},legend:"none",backgroundColor:"transparent",datalessRegionColor:"#FFF",region:"TR"},n=!1,o=null;countlyCommon.CITY_DATA===!1?(a.initialize=function(){return!0},a.refresh=function(){return!0},a.drawGeoChart=function(){return!0},a.refreshGeoChart=function(){return!0},a.getLocationData=function(){return[]}):(a.initialize=function(){return n&&o==countlyCommon.getPeriodForAjax()&&j==countlyCommon.ACTIVE_APP_KEY?a.refresh():(o=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?(i={2012:{}},!0):(j=countlyCommon.ACTIVE_APP_KEY,n=!0,b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"cities",period:o},dataType:"jsonp",success:function(a){i=a,e()}})))},a.refresh=function(){return h=countlyCommon.periodObj,countlyCommon.DEBUG?(i={2012:{}},!0):j!=countlyCommon.ACTIVE_APP_KEY?(j=countlyCommon.ACTIVE_APP_KEY,a.initialize()):b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"cities",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(i,a),e()}})},a.reset=function(){i={},e()},a.drawGeoChart=function(a){h=countlyCommon.periodObj,a&&(a.chartElementId&&(l=a.chartElementId),a.height&&(m.height=a.height,m.width=556*a.height/347)),google.visualization?c(a.metric):google.load("visualization","1",{packages:["geochart"],callback:c})},a.refreshGeoChart=function(a){google.visualization?d(a):google.load("visualization","1",{packages:["geochart"],callback:c})},a.getLocationData=function(b){var c=countlyCommon.extractTwoLevelData(i,k,a.clearLocationObject,[{name:"city",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]);return b&&b.maxCountries&&c.chartData&&c.chartData.length>b.maxCountries&&(c.chartData=c.chartData.splice(0,b.maxCountries)),c.chartData}),a.clearLocationObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a}}(window.countlyCity=window.countlyCity||{},jQuery),function(a,b){function c(c){c=c||{id:"total",label:jQuery.i18n.map["sidebar.analytics.sessions"],type:"number",metric:"t"};var d={cols:[],rows:[]};g=new google.visualization.GeoChart(document.getElementById(l));var e=countlyCommon.extractTwoLevelData(j,k,a.clearLocationObject,[{name:"country",func:function(b){return a.getCountryName(b)}},{name:"t"},{name:"u"},{name:"n"}]);d.cols=[{id:"country",label:jQuery.i18n.map["countries.table.country"],type:"string"}],d.cols.push(c),d.rows=_.map(e.chartData,function(a){return"European Union"==a.country||"Unknown"==a.country?{c:[{v:""},{v:a[c.metric]}]}:{c:[{v:a.country},{v:a[c.metric]}]}}),h=new google.visualization.DataTable(d),m.region="world",m.resolution="countries",m.displayMode="region",countlyCommon.CITY_DATA!==!1&&m.height>300&&google.visualization.events.addListener(g,"regionClick",function(a){var c=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].country;c&&a.region==c&&(m.region=a.region,m.resolution="countries",g.draw(h,m),b(document).trigger("selectMapCountry"))}),g.draw(h,m)}function d(b){b=b||{id:"total",label:jQuery.i18n.map["sidebar.analytics.sessions"],type:"number",metric:"t"};var c={cols:[],rows:[]},d=countlyCommon.extractTwoLevelData(j,k,a.clearLocationObject,[{name:"country",func:function(b){return a.getCountryName(b)}},{name:"t"},{name:"u"},{name:"n"}]);c.cols=[{id:"country",label:jQuery.i18n.map["countries.table.country"],type:"string"}],c.cols.push(b),c.rows=_.map(d.chartData,function(a){return"European Union"==a.country||"Unknown"==a.country?{c:[{v:""},{v:a[b.metric]}]}:{c:[{v:a.country},{v:a[b.metric]}]}}),h=new google.visualization.DataTable(c),g.draw(h,m)}function e(){k=j.meta&&j.meta.countries?j.meta.countries:[]}function f(){j.meta&&(k=countlyCommon.union(k,j.meta.countries))}var g,h,i={},j={},k=[],l="geo-chart",m={displayMode:"region",colorAxis:{minValue:0,colors:["#D7F1D8","#6BB96E"]},resolution:"countries",toolTip:{textStyle:{color:"#FF0000"},showColorCode:!1},legend:"none",backgroundColor:"transparent",datalessRegionColor:"#FFF"},n={};b.get("localization/countries/"+countlyCommon.BROWSER_LANG_SHORT+"/country.json",function(a){n=a}),a.initialize=function(){j=countlyUser.getDbObj(),e()},a.refresh=function(a){countlyCommon.extendDbObj(j,a),f()},a.reset=function(){j={},e()},a.drawGeoChart=function(a){i=countlyCommon.periodObj,a&&(a.chartElementId&&(l=a.chartElementId),a.height&&(m.height=a.height,m.width=556*a.height/347)),google.visualization?c(a.metric):google.load("visualization","1",{packages:["geochart"],callback:c})},a.refreshGeoChart=function(a){google.visualization?d(a):google.load("visualization","1",{packages:["geochart"],callback:c})},a.getLocationData=function(b){var c=countlyCommon.extractTwoLevelData(j,k,a.clearLocationObject,[{name:"country",func:function(b){return a.getCountryName(b)}},{name:"code",func:function(a){return a.toLowerCase()}},{name:"t"},{name:"u"},{name:"n"}]);c.chartData=countlyCommon.mergeMetricsByName(c.chartData,"country"),c.chartData=_.sortBy(c.chartData,function(a){return-a.t}),b&&b.maxCountries&&c.chartData&&c.chartData.length>b.maxCountries&&(c.chartData=c.chartData.splice(0,b.maxCountries));for(var d=0;d<c.chartData.length;d++)c.chartData[d].country_flag="<div class='flag' style='background-image:url("+countlyGlobal.path+"/images/flags/"+c.chartData[d].code+".png);'></div>"+c.chartData[d].country;return c.chartData},a.clearLocationObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a},a.getCountryName=function(a){var b=n[a.toUpperCase()];return b?b:"Unknown"},a.changeLanguage=function(){return b.get("localization/countries/"+countlyCommon.BROWSER_LANG_SHORT+"/country.json",function(a){n=a})}}(window.countlyLocation=window.countlyLocation||{},jQuery),function(a,b){function c(){f.meta?(g=f.meta["l-ranges"]?f.meta["l-ranges"]:[],h=f.meta["f-ranges"]?f.meta["f-ranges"]:[]):(g=[],h=[])}function d(){f.meta&&(g=countlyCommon.union(g,f.meta["l-ranges"]),h=countlyCommon.union(h,f.meta["f-ranges"]))}var e={},f={},g=[],h=[],i=0,j=!1,k=null;a.initialize=function(){return j&&k==countlyCommon.getPeriodForAjax()&&i==countlyCommon.ACTIVE_APP_KEY?a.refresh():(k=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?!0:(i=countlyCommon.ACTIVE_APP_KEY,j=!0,b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"users",period:k},dataType:"jsonp",success:function(a){f=a,c(),countlySession.initialize(),countlyLocation.initialize()}})))},a.refresh=function(){return countlyCommon.DEBUG?!0:i!=countlyCommon.ACTIVE_APP_KEY?(i=countlyCommon.ACTIVE_APP_KEY,a.initialize()):b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"users",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(f,a),d(),countlySession.refresh(a),countlyLocation.refresh(a)}})},a.reset=function(){f={},c()},a.getFrequencyData=function(){var b={chartData:{},chartDP:{dp:[],ticks:[]}};b.chartData=countlyCommon.extractRangeData(f,"f",h,a.explainFrequencyRange);var c=_.pluck(b.chartData,"f"),d=_.pluck(b.chartData,"t"),e=[{data:[]}];e[0].data[0]=[-1,null],e[0].data[c.length+1]=[c.length,null],b.chartDP.ticks.push([-1,""]),b.chartDP.ticks.push([c.length,""]);for(var g=0;g<c.length;g++)e[0].data[g+1]=[g,d[g]],b.chartDP.ticks.push([g,c[g]]);b.chartDP.dp=e;for(var g=0;g<b.chartData.length;g++)b.chartData[g].percent="<div class='percent-bar' style='width:"+2*b.chartData[g].percent+"px;'></div>"+b.chartData[g].percent+"%";return b},a.getLoyaltyData=function(){var b={chartData:{},chartDP:{dp:[],ticks:[]}};b.chartData=countlyCommon.extractRangeData(f,"l",g,a.explainLoyaltyRange);var c=_.pluck(b.chartData,"l"),d=_.pluck(b.chartData,"t"),e=[{data:[]}];e[0].data[0]=[-1,null],e[0].data[c.length+1]=[c.length,null],b.chartDP.ticks.push([-1,""]),b.chartDP.ticks.push([c.length,""]);for(var h=0;h<c.length;h++)e[0].data[h+1]=[h,d[h]],b.chartDP.ticks.push([h,c[h]]);b.chartDP.dp=e;for(var h=0;h<b.chartData.length;h++)b.chartData[h].percent="<div class='percent-bar' style='width:"+2*b.chartData[h].percent+"px;'></div>"+b.chartData[h].percent+"%";return b},a.getLoyaltyDP=function(){e=countlyCommon.periodObj;for(var a,b=[{data:[],label:jQuery.i18n.map["user-loyalty.loyalty"]}],c=[],d=0;d<g.length;d++)if(a=0,e.isSpecialPeriod){for(var h=0;h<e.currentPeriodArr.length;h++){var i=countlyCommon.getDescendantProp(f,e.currentPeriodArr[h]+".l");i=clearLoyaltyObject(i),a+=i[g[d]]}0!=a&&(b[0].data[b[0].data.length]=[d,a],c[d]=[d,g[d]])}else{for(var h=e.periodMin;h<e.periodMax+1;h++){var i=countlyCommon.getDescendantProp(f,e.activePeriod+"."+h+".l");i=clearLoyaltyObject(i),a+=i[g[d]]}0!=a&&(b[0].data[b[0].data.length]=[d,a],c[d]=[d,g[d]])}return{dp:b,ticks:c}},a.explainFrequencyRange=function(a){var b=jQuery.i18n.map["user-loyalty.range.hours"],c=jQuery.i18n.map["user-loyalty.range.day"],d=jQuery.i18n.map["user-loyalty.range.days"],e=[jQuery.i18n.map["user-loyalty.range.first-session"],"1-24 "+b,"1 "+c,"2 "+d,"3 "+d,"4 "+d,"5 "+d,"6 "+d,"7 "+d,"8-14 "+d,"15-30 "+d,"30+ "+d];return e[a]},a.getFrequencyIndex=function(a){var b=jQuery.i18n.map["user-loyalty.range.hours"],c=jQuery.i18n.map["user-loyalty.range.day"],d=jQuery.i18n.map["user-loyalty.range.days"],e=[jQuery.i18n.map["user-loyalty.range.first-session"],"1-24 "+b,"1 "+c,"2 "+d,"3 "+d,"4 "+d,"5 "+d,"6 "+d,"7 "+d,"8-14 "+d,"15-30 "+d,"30+ "+d];return e.indexOf(a)},a.explainLoyaltyRange=function(a){var b=["1","2","3-5","6-9","10-19","20-49","50-99","100-499","> 500"];return b[a]},a.getLoyaltyIndex=function(a){var b=["1","2","3-5","6-9","10-19","20-49","50-99","100-499","> 500"];return b.indexOf(a)},a.isInitialized=function(){return j},a.getDbObj=function(){return f}}(window.countlyUser=window.countlyUser||{},jQuery),countlyDeviceList={"iPhone1,1":"iPhone 1G","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4 (GSM)","iPhone3,2":"iPhone 4 (GSM Rev A)","iPhone3,3":"iPhone 4 (CDMA)","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5 (GSM)","iPhone5,2":"iPhone 5 (Global)","iPhone5,3":"iPhone 5C (GSM)","iPhone5,4":"iPhone 5C (Global)","iPhone6,1":"iPhone 5S (GSM)","iPhone6,2":"iPhone 5S (Global)","iPhone7,1":"iPhone 6 Plus","iPhone7,2":"iPhone 6","iPod1,1":"iPod Touch 1G","iPod2,1":"iPod Touch 2G","iPod3,1":"iPod Touch 3G","iPod4,1":"iPod Touch 4G","iPod5,1":"iPod Touch 5G","iPad1,1":"iPad","iPad2,1":"iPad 2 (WiFi)","iPad2,2":"iPad 2 (GSM)","iPad2,3":"iPad 2 (CDMA)","iPad2,4":"iPad 2 (WiFi Rev A)",
"iPad3,1":"iPad 3 (WiFi)","iPad3,2":"iPad 3 (CDMA)","iPad3,3":"iPad 3 (Global)","iPad3,4":"iPad 4 (WiFi)","iPad3,5":"iPad 4 (GSM)","iPad3,6":"iPad 4 (Global)","iPad4,1":"iPad Air (WiFi)","iPad4,2":"iPad Air (Global)","iPad4,3":"iPad Air (Global)","iPad5,3":"iPad Air 2G (WiFi)","iPad5,4":"iPad Air 2G (Global)","iPad2,5":"iPad Mini (WiFi)","iPad2,6":"iPad Mini (GSM)","iPad2,7":"iPad Mini (Global)","iPad4,4":"iPad Mini 2G (WiFi)","iPad4,5":"iPad Mini 2G (Global)","iPad4,6":"iPad Mini 2G (Global)","iPad4,7":"iPad Mini 3G (WiFi)","iPad4,8":"iPad Mini 3G (Global)","iPad4,9":"iPad Mini 3G (Global)",i386:"Simulator",x86_64:"Simulator"},function(a,b){function c(){g=f.meta&&f.meta.devices?f.meta.devices:[]}function d(){f.meta&&(g=countlyCommon.union(g,f.meta.devices))}var e={},f={},g=[],h=0,i=!1,j=null;a.initialize=function(){return i&&j==countlyCommon.getPeriodForAjax()&&h==countlyCommon.ACTIVE_APP_KEY?a.refresh():(j=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?(f={2012:{}},!0):(h=countlyCommon.ACTIVE_APP_KEY,i=!0,b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"devices",period:j},dataType:"jsonp",success:function(a){f=a,c()}})))},a.refresh=function(){return e=countlyCommon.periodObj,countlyCommon.DEBUG?(f={2012:{}},!0):h!=countlyCommon.ACTIVE_APP_KEY?(h=countlyCommon.ACTIVE_APP_KEY,a.initialize()):b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"devices",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(f,a),d()}})},a.reset=function(){f={},c()},a.getDeviceData=function(){for(var b=countlyCommon.extractTwoLevelData(f,g,a.clearDeviceObject,[{name:"device",func:function(b){return a.getDeviceFullName(b)}},{name:"t"},{name:"u"},{name:"n"}]),c=_.pluck(b.chartData,"device"),d=_.pluck(b.chartData,"u"),e=_.pluck(b.chartData,"n"),h=[],i=[],j=_.reduce(d,function(a,b){return a+b},0),k=0;k<c.length;k++){{d[k]/j*100}h[k]={data:[[0,d[k]]],label:c[k]}}for(var l=_.reduce(e,function(a,b){return a+b},0),k=0;k<c.length;k++){{e[k]/l*100}i[k]={data:[[0,e[k]]],label:c[k]}}return b.chartDPTotal={},b.chartDPTotal.dp=h,b.chartDPNew={},b.chartDPNew.dp=i,b},a.getDeviceDP=function(){e=countlyCommon.periodObj;for(var b,c=[{data:[],label:"Devices"}],d=[],h=0;h<g.length;h++)if(b=0,e.isSpecialPeriod){for(var i=0;i<e.currentPeriodArr.length;i++){var j=countlyCommon.getDescendantProp(f,e.currentPeriodArr[i]+".device");j=clearLoyaltyObject(j),b+=j[f.devices[h]]}0!=b&&(c[0].data[c[0].data.length]=[h,b],d[h]=[h,a.getDeviceFullName(f.devices[h])])}else{for(var i=e.periodMin;i<e.periodMax+1;i++){var j=countlyCommon.getDescendantProp(f,e.activePeriod+"."+i+".device");j=clearLoyaltyObject(j),b+=j[f.devices[h]]}0!=b&&(c[0].data[c[0].data.length]=[h,b],d[h]=[h,a.getDeviceFullName(f.devices[h])])}return{dp:c,ticks:d}},a.clearDeviceObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a},a.getDeviceFullName=function(a){return countlyDeviceList&&countlyDeviceList[a]?countlyDeviceList[a]:a}}(window.countlyDevice=window.countlyDevice||{},jQuery),function(a,b){function c(){f.meta?(g=f.meta.os?f.meta.os:[],h=f.meta.resolutions?f.meta.resolutions:[],i=f.meta.os_versions?f.meta.os_versions:[]):(g=[],h=[],i=[]),i.length&&(i=i.join(",").replace(/\./g,":").split(","))}function d(){f.meta&&(g=countlyCommon.union(g,f.meta.os),h=countlyCommon.union(h,f.meta.resolutions),i=countlyCommon.union(i,f.meta.os_versions)),i.length&&(i=i.join(",").replace(/\./g,":").split(","))}var e={},f={},g=[],h=[],i=[],j=0,k=!1,l=null;a.initialize=function(){return k&&l==countlyCommon.getPeriodForAjax()&&j==countlyCommon.ACTIVE_APP_KEY?a.refresh():(l=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?(f={2012:{}},!0):(j=countlyCommon.ACTIVE_APP_KEY,k=!0,b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"device_details",period:l},dataType:"jsonp",success:function(a){f=a,c(),countlyAppVersion.initialize()}})))},a.refresh=function(){return e=countlyCommon.periodObj,countlyCommon.DEBUG?(f={2012:{}},!0):j!=countlyCommon.ACTIVE_APP_KEY?(j=countlyCommon.ACTIVE_APP_KEY,a.initialize()):b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"device_details",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(f,a),d(),countlyAppVersion.refresh(a)}})},a.reset=function(){f={},c()},a.clearDeviceDetailsObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a},a.getPlatforms=function(){return g},a.getPlatformBars=function(){return countlyCommon.extractBarData(f,g,a.clearDeviceDetailsObject)},a.getPlatformData=function(){for(var b=countlyCommon.extractTwoLevelData(f,g,a.clearDeviceDetailsObject,[{name:"os_",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]),c=_.pluck(b.chartData,"os_"),d=_.pluck(b.chartData,"u"),e=[],h=_.reduce(d,function(a,b){return a+b},0),i=0;i<c.length;i++){{d[i]/h*100}e[i]={data:[[0,d[i]]],label:c[i]}}return b.chartDP={},b.chartDP.dp=e,b},a.getResolutionBars=function(){return countlyCommon.extractBarData(f,h,a.clearDeviceDetailsObject)},a.getResolutionData=function(){for(var b=countlyCommon.extractTwoLevelData(f,h,a.clearDeviceDetailsObject,[{name:"resolution",func:function(a){return a}},{name:"width",func:function(a){return"<a>"+a.split("x")[0]+"</a>"}},{name:"height",func:function(a){return"<a>"+a.split("x")[1]+"</a>"}},{name:"t"},{name:"u"},{name:"n"}]),c=_.pluck(b.chartData,"resolution"),d=_.pluck(b.chartData,"u"),e=_.pluck(b.chartData,"n"),g=[],i=[],j=_.reduce(d,function(a,b){return a+b},0),k=0;k<c.length;k++){{d[k]/j*100}g[k]={data:[[0,d[k]]],label:c[k]}}for(var k=(_.reduce(e,function(a,b){return a+b},0),0);k<c.length;k++){{e[k]/j*100}i[k]={data:[[0,e[k]]],label:c[k]}}return b.chartDPTotal={},b.chartDPTotal.dp=g,b.chartDPNew={},b.chartDPNew.dp=i,b},a.getOSVersionBars=function(){for(var b=countlyCommon.extractBarData(f,i,a.clearDeviceDetailsObject),c=0;c<b.length;c++)b[c].name=a.fixOSVersion(b[c].name);return b},a.getOSVersionData=function(b){var c=countlyCommon.extractTwoLevelData(f,i,a.clearDeviceDetailsObject,[{name:"os_version",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]),d=b?b:g?g[0]:null,e=_.pluck(c.chartData,"u"),h=[];if(c.chartData)for(var j=0;j<c.chartData.length;j++)c.chartData[j].os_version=a.fixOSVersion(c.chartData[j].os_version),-1==c.chartData[j].os_version.indexOf(d)&&delete c.chartData[j];c.chartData=_.compact(c.chartData);for(var k=_.pluck(c.chartData,"os_version"),l=_.reduce(e,function(a,b){return a+b},0),j=0;j<k.length;j++){{e[j]/l*100}h[h.length]={data:[[0,e[j]]],label:k[j].replace(d+" ","")}}if(c.chartDP={},c.chartDP.dp=h,c.os=[],g&&g.length>1)for(var j=0;j<g.length;j++)c.os.push({name:g[j],"class":g[j].toLowerCase()});return c},a.fixOSVersion=function(a){return a.replace(/:/g,".").replace(/^unk/g,"Unknown ").replace(/^qnx/g,"QNX ").replace(/^os2/g,"OS/2 ").replace(/^mw/g,"Windows ").replace(/^ob/g,"Open BSD ").replace(/^sb/g,"SearchBot ").replace(/^so/g,"Sun OS ").replace(/^bo/g,"BeOS ").replace(/^l/g,"Linux ").replace(/^u/g,"UNIX ").replace(/^i/g,"iOS ").replace(/^a/g,"Android ").replace(/^b/g,"BlackBerry ").replace(/^w/g,"Windows Phone ").replace(/^o/g,"OS X ").replace(/^m/g,"Mac ").replace(/^t/g,"Tizen ")},a.getDbObj=function(){return f}}(window.countlyDeviceDetails=window.countlyDeviceDetails||{},jQuery),function(a){function b(){e=d.meta&&d.meta.app_versions?d.meta.app_versions:[]}function c(){d.meta&&(e=countlyCommon.union(e,d.meta.app_versions))}var d={},e=[];a.initialize=function(){d=countlyDeviceDetails.getDbObj(),b()},a.refresh=function(a){countlyCommon.extendDbObj(d,a),c()},a.reset=function(){d={},b()},a.clearAppVersionsObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a},a.getAppVersionBars=function(){return countlyCommon.extractBarData(d,e,a.clearAppVersionsObject)},a.getAppVersionData=function(){var b={chartData:{},chartDP:{dp:[],ticks:[]}},c=countlyCommon.extractTwoLevelData(d,e,a.clearAppVersionsObject,[{name:"app_version",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]);if(b.chartData=c.chartData,b.chartData)for(var f=0;f<b.chartData.length;f++)b.chartData[f].app_version=b.chartData[f].app_version.replace(/:/g,".");var g=_.pluck(b.chartData,"app_version"),h=_.pluck(b.chartData,"t"),i=_.pluck(b.chartData,"n"),j=[{data:[],label:jQuery.i18n.map["common.table.total-sessions"]},{data:[],label:jQuery.i18n.map["common.table.new-users"]}];j[0].data[0]=[-1,null],j[0].data[g.length+1]=[g.length,null],b.chartDP.ticks.push([-1,""]),b.chartDP.ticks.push([g.length,""]);for(var f=0;f<g.length;f++)j[0].data[f+1]=[f,h[f]],j[1].data[f+1]=[f,i[f]],b.chartDP.ticks.push([f,g[f]]);return b.chartDP.dp=j,b}}(window.countlyAppVersion=window.countlyAppVersion||{},jQuery),function(a,b){function c(){g=f.meta&&f.meta.carriers?f.meta.carriers:[]}function d(){f.meta&&(g=countlyCommon.union(g,f.meta.carriers))}var e={},f={},g=[],h=0,i=!1,j=null;a.initialize=function(){return i&&j==countlyCommon.getPeriodForAjax()&&h==countlyCommon.ACTIVE_APP_KEY?a.refresh():(j=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?(f={2012:{}},!0):(h=countlyCommon.ACTIVE_APP_KEY,i=!0,b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"carriers",period:j},dataType:"jsonp",success:function(a){f=a,c()}})))},a.refresh=function(){return e=countlyCommon.periodObj,countlyCommon.DEBUG?(f={2012:{}},!0):h!=countlyCommon.ACTIVE_APP_KEY?(h=countlyCommon.ACTIVE_APP_KEY,a.initialize()):b.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"carriers",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(f,a),d()}})},a.reset=function(){f={},c()},a.getCarrierData=function(){for(var b=countlyCommon.extractTwoLevelData(f,g,a.clearCarrierObject,[{name:"carrier",func:function(a){return a}},{name:"t"},{name:"u"},{name:"n"}]),c=_.pluck(b.chartData,"carrier"),d=_.pluck(b.chartData,"t"),e=_.pluck(b.chartData,"n"),h=[],i=[],j=_.reduce(d,function(a,b){return a+b},0),k=0;k<c.length;k++){{d[k]/j*100}h[k]={data:[[0,d[k]]],label:c[k]}}for(var k=(_.reduce(e,function(a,b){return a+b},0),0);k<c.length;k++){{e[k]/j*100}i[k]={data:[[0,e[k]]],label:c[k]}}return b.chartDPTotal={},b.chartDPTotal.dp=h,b.chartDPNew={},b.chartDPNew.dp=i,b},a.clearCarrierObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a},a.getCarrierBars=function(){return countlyCommon.extractBarData(f,g,a.clearCarrierObject)}}(window.countlyCarrier=window.countlyCarrier||{},jQuery),function(a,b){var c,d={all:{_id:"all",name:"All apps"}},e={},f={},g={};a.initialize=function(){return a.refresh()},a.refresh=function(){if(countlyCommon.DEBUG)return!0;this.reset();var a=[];c=countlyCommon.ACTIVE_APP_ID;for(var e in countlyGlobal.apps)a.push(h(e));return b.when.apply(b,a).then(function(){countlyCommon.setActiveApp(c),d.all.sessions={total:0,trend:0},d.all.users={total:0,trend:0},d.all.newusers={total:0,trend:0},d.all.duration={total:0,trend:0},d.all.avgduration={total:0,trend:0},f.all={};for(var a in countlyGlobal.apps){d[a].duration.total=0,d[a].avgduration.total=0;var b=g[a];for(var e in f[a])for(var h=0,j=f[a][e].data.length;j>h;h++)f.all[e]||(f.all[e]={},f.all[e].label=f[a][e].label,f.all[e].data=[]),f.all[e].data[h]||(f.all[e].data[h]=[0,0]),f.all[e].data[h][0]=f[a][e].data[h][0],f.all[e].data[h][1]+=parseFloat(f[a][e].data[h][1]),"#draw-total-time-spent"==e&&(d.all.duration.total+=parseFloat(f[a][e].data[h][1]),d[a].duration.total+=parseFloat(f[a][e].data[h][1]));d.all.sessions.total+=b.usage["total-sessions"].total,d.all.users.total+=b.usage["total-users"].total,d.all.newusers.total+=b.usage["new-users"].total,d.all.sessions.trend+=i(b.usage["total-sessions"].change),d.all.users.trend+=i(b.usage["total-users"].change),d.all.newusers.trend+=i(b.usage["new-users"].change),d.all.duration.trend+=i(b.usage["total-duration"].change),d.all.avgduration.trend+=i(b.usage["avg-duration-per-session"].change),d[a].avgduration.total=0==d[a].sessions.total?0:d[a].duration.total/d[a].sessions.total}for(var e in d.all)d.all[e].trend=d.all[e].trend<0?"d":"u";d.all.avgduration.total=0==d.all.sessions.total?0:d.all.duration.total/d.all.sessions.total})},a.reset=function(){e={}},a.getData=function(){var a=[];for(var b in d)a.push(d[b]);return a},a.getSessionData=function(){return f},a.setApp=function(a){c=a,countlyCommon.setActiveApp(c)};var h=function(a){return countlyCommon.setActiveApp(a),b.when(countlyUser.initialize()).done(function(){var b=countlySession.getSessionData();e[a]||(g[a]=b,f[a]={"#draw-total-users":countlySession.getUserDPActive().chartDP[1],"#draw-new-users":countlySession.getUserDPNew().chartDP[1],"#draw-total-sessions":countlySession.getSessionDPTotal().chartDP[1],"#draw-time-spent":countlySession.getDurationDPAvg().chartDP[1],"#draw-total-time-spent":countlySession.getDurationDP().chartDP[1],"#draw-avg-events-served":countlySession.getEventsDPAvg().chartDP[1]},d[a]={_id:a,name:countlyGlobal.apps[a].name,sessions:b.usage["total-sessions"],users:b.usage["total-users"],newusers:b.usage["new-users"],duration:b.usage["total-duration"],avgduration:b.usage["avg-duration-per-session"]},e[a]=!0)})},i=function(a){if("NA"==a||"∞"==a)return 0;a=a.slice(0,-1);var b=1;return"K"==a.slice(-1)?(a=a.slice(0,-1),b=1e3):"M"==a.slice(-1)&&(a=a.slice(0,-1),b=1e6),parseFloat(a)*b}}(window.countlyAllApps=window.countlyAllApps||{},jQuery);var countlyView=Backbone.View.extend({template:null,templateData:{},el:$("#content"),initialize:function(){this.template=Handlebars.compile($("#template-analytics-common").html())},dateChanged:function(){"/"==Backbone.history.fragment?this.refresh(!0):this.refresh()},appChanged:function(){countlyEvent.reset();var a=this;$.when(countlyEvent.initialize()).then(function(){a.render()})},beforeRender:function(){return!0},afterRender:function(){},render:function(){if($("#content-top").html(""),this.el.html('<div id="content-loader"></div>'),countlyCommon.ACTIVE_APP_ID){var a=this;$.when(this.beforeRender(),initializeOnce()).then(function(){a.renderCommon(),a.afterRender(),app.pageScript()})}else this.renderCommon(),this.afterRender(),app.pageScript();return this},renderCommon:function(){},refresh:function(){return!0},restart:function(){this.refresh()},destroy:function(){}}),initializeOnce=_.once(function(){return $.when(countlyEvent.initialize()).then(function(){})}),Template=function(){this.cached={}},T=new Template;$.extend(Template.prototype,{render:function(a,b){T.isCached(a)?b(T.cached[a]):$.get(T.urlFor(a),function(c){T.store(a,c),T.render(a,b)})},renderSync:function(a,b){T.isCached(a)||T.fetch(a),T.render(a,b)},prefetch:function(a){$.get(T.urlFor(a),function(b){T.store(a,b)})},fetch:function(a){if(!T.isCached(a)){var b=$.ajax({url:T.urlFor(a),async:!1}).responseText;T.store(a,b)}},isCached:function(a){return!!T.cached[a]},store:function(a,b){T.cached[a]=Handlebars.compile(b)},urlFor:function(a){return a+".html"}}),function(a,b){function c(a){b("body").append(a);var c=a.outerHeight()+5,d=a.outerWidth()+5;a.css({height:c,"margin-top":Math.floor(-c/2),width:d,"margin-left":Math.floor(-d/2)}),b("#overlay").fadeIn(),a.fadeIn(app.tipsify.bind(app,b("#help-toggle").hasClass("active"),a))}function d(a,c,d){var e=c||a.attr("data-height")||a.height()+15,f=a.width(),g=b("#sidebar").height()-40;a.attr("data-height",c),a[d?"animate":"css"](e>g?{height:g,"margin-top":Math.floor(-g/2),width:f,"margin-left":Math.floor(-f/2),"overflow-y":"auto"}:{height:e,"margin-top":Math.floor(-e/2),width:f,"margin-left":Math.floor(-f/2)})}a.parseAndShowMsg=function(b){if(!b||!b.length)return!0;_.isArray(b)&&(b=b[0]);var c="info",d="",e=b.split("|");e.length>1?(c=e[0],d=e[1]):d=b,a.notify({type:c,message:d}),delete countlyGlobal.message},a.notify=function(a){b.titleAlert(a.title||a.message||a.info||"Notification",{requireBlur:!0,stopOnFocus:!0,duration:a.delay||1e4,interval:1e3}),b.amaran({content:{title:a.title||"Notification",message:a.message||"",info:a.info||"",icon:a.icon||"fa fa-info"},theme:"awesome "+(a.type||"ok"),position:a.position||"top right",delay:a.delay||1e4,sticky:a.sticky||!1,clearAll:a.clearAll||!1,closeButton:!0,closeOnClick:a.closeOnClick===!1?!1:!0,onClick:a.onClick||null})},a.popup=function(a,d,e){var f=b("#cly-popup").clone();f.removeAttr("id"),d&&f.addClass(d),f.find(".content").html(e?a:b(a).html()),c(f)},a.openResource=function(a){var d=b("#cly-resource").clone();d.removeAttr("id"),d.find(".content").html("<iframe style='border-radius:5px; border:none; width:800px; height:600px;' src='"+a+"'></iframe>"),c(d)},a.alert=function(a,d){var e=b("#cly-alert").clone();e.removeAttr("id"),e.find(".message").html(a),e.addClass(d),c(e)},a.confirm=function(a,d,e,f){var g=b("#cly-confirm").clone();g.removeAttr("id"),g.find(".message").html(a),f&&2==f.length&&(g.find("#dialog-cancel").text(f[0]),g.find("#dialog-continue").text(f[1])),g.addClass(d),c(g),g.find("#dialog-cancel").on("click",function(){e(!1)}),g.find("#dialog-continue").on("click",function(){e(!0)})},a.loading=function(a){var d=b("#cly-loading").clone();return d.removeAttr("id"),d.find(".message").html(a),d.addClass("cly-loading"),c(d),d},a.setUpDateSelectors=function(a){b("#month").text(moment().year()),b("#day").text(moment().format("MMM")),b("#yesterday").text(moment().subtract("days",1).format("Do")),b("#date-selector").find(">.button").click(function(){if(b(this).hasClass("selected"))return!0;a.dateFromSelected=null,a.dateToSelected=null,b(".date-selector").removeClass("selected").removeClass("active"),b(this).addClass("selected");var c=b(this).attr("id");return countlyCommon.getPeriod()==c?!0:(countlyCommon.setPeriod(c),a.dateChanged(c),void b("#"+c).addClass("active"))}),b("#date-selector").find(">.button").each(function(){countlyCommon.getPeriod()==b(this).attr("id")&&b(this).addClass("active").addClass("selected")})},a.initializeSelect=function(a){a=a||b("#content-container"),a.off("click",".cly-select").on("click",".cly-select",function(a){if(b(this).hasClass("disabled"))return!0;b(this).removeClass("req");var c=b(this).find(".select-items"),d=c.find(".item").length;if(!c.length)return!1;if(b(".cly-select").find(".search").remove(),c.is(":visible")?b(this).removeClass("active"):(b(".cly-select").removeClass("active"),b(".select-items").hide(),b(this).addClass("active"),d>10&&!b(this).hasClass("centered")&&b("<div class='search'><div class='inner'><input type='text' /><i class= fa fa-search'></i></div></div>").insertBefore(b(this).find(".select-items"))),b(this).hasClass("centered")){var e=b(this).find(".select-items").height();b(this).find(".select-items").css("margin-top",-(e/2).toFixed(0)-(b(this).height()/2).toFixed(0)+"px")}b(this).find(".select-items").is(":visible")?b(this).find(".select-items").hide():(b(this).find(".select-items").show(),b(this).find(".select-items>div").addClass("scroll-list"),b(this).find(".scroll-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0})),b(this).find(".search input").focus(),b("#date-picker").hide(),a.stopPropagation()}),a.off("click",".select-items .item").on("click",".select-items .item",function(){var a=b(this).parents(".cly-select").find(".text");a.text(b(this).text()),a.data("value",b(this).data("value"))}),a.off("click",".cly-select .search").on("click",".cly-select .search",function(a){a.stopPropagation()}),a.off("keyup",".cly-select .search input").on("keyup",".cly-select .search input",function(){b(this).val()?(b(this).parents(".cly-select").find(".item:not(:contains('"+b(this).val()+"'))").addClass("hidden"),b(this).parents(".cly-select").find(".item:contains('"+b(this).val()+"')").removeClass("hidden")):b(this).parents(".cly-select").find(".item").removeClass("hidden")}),a.off("mouseenter").on("mouseenter",".cly-select .item",function(){var a=b(this);this.offsetWidth<this.scrollWidth&&!a.attr("title")&&a.attr("title",a.text())}),b(window).click(function(){b(".select-items").hide(),b(".cly-select").find(".search").remove()})},a.refreshTable=function(a,b){var c=a.fnSettings();if(a.fnClearTable(!1),b&&b.length)for(var d=0;d<b.length;d++)a.oApi._fnAddData(c,b[d]);c.aiDisplay=c.aiDisplayMaster.slice(),a.fnStandingRedraw()},a.expandRows=function(a,c){a.aOpen=[],a.on("click","tr",function(d){var e=this,f=b(e).attr("id");if(f){var g=b.inArray(f,a.aOpen);if(-1===g){b(e).addClass("selected");var h=a.fnOpen(e,c(a.fnGetData(e)),"details");b("div.datatablesubrow",h).slideDown(),a.aOpen.push(f)}else b(e).removeClass("selected"),b("div.datatablesubrow",b(e).next()[0]).slideUp(function(){a.fnClose(e),a.aOpen.splice(g,1)})}else d.stopPropagation()})},a.reopenRows=function(a,c){a.fnSettings();a.aOpen&&b.each(a.aOpen,function(d,e){var f=b("#"+e)[0];b(f).addClass("selected");var g=a.fnOpen(f,c(a.fnGetData(f)),"details");b("div.datatablesubrow",g).show()})},a.appIdsToNames=function(a){for(var b="",c=0;c<a.length;c++)a[c]&&(b+=countlyGlobal.apps[a[c]]?countlyGlobal.apps[a[c]].name:"deleted app",a.length>1&&c!=a.length-1&&(b+=", "));return b},a.loadJS=function(a,b){var c,d=document.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a),b&&(d.onreadystatechange=d.onload=function(){c||b(),c=!0}),document.getElementsByTagName("head")[0].appendChild(d)},a.loadCSS=function(a,b){var c,d=document.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",a),b&&(d.onreadystatechange=d.onload=function(){c||b(),c=!0}),document.getElementsByTagName("head")[0].appendChild(d)},a.messageText=function(a){if(!a)return"";if(a["default"])return a["default"];if(a.en)return a.en;for(var b in a)return a[b];return""},a.clip=function(a){return function(b){var c=a(b);return'<div class="clip'+(c?"":" nothing")+'">'+(c||jQuery.i18n.map["push.no-message"])+"</div>"}},a.createMetricModel=function(a,b,c,d){function e(){i=h.meta&&h.meta[b]?h.meta[b]:[]}function f(){h.meta&&(i=countlyCommon.union(i,h.meta[b]))}var g={},h={},i=[],j=0,k=!1,l=null;a.initialize=function(){return k&&l==countlyCommon.getPeriodForAjax()&&j==countlyCommon.ACTIVE_APP_KEY?this.refresh():(l=countlyCommon.getPeriodForAjax(),countlyCommon.DEBUG?(h={2012:{}},!0):(j=countlyCommon.ACTIVE_APP_KEY,k=!0,c.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:b,period:l},dataType:"jsonp",success:function(a){h=a,e()}})))},a.refresh=function(){return g=countlyCommon.periodObj,countlyCommon.DEBUG?(h={2012:{}},!0):j!=countlyCommon.ACTIVE_APP_KEY?(j=countlyCommon.ACTIVE_APP_KEY,this.initialize()):c.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:b,action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(h,a),f()}})},a.reset=function(){h={},e()},a.getData=function(){var a=countlyCommon.extractTwoLevelData(h,i,this.clearObject,[{name:b,func:function(a){return d?d(a):a}},{name:"t"},{name:"u"},{name:"n"}]);a.chartData=countlyCommon.mergeMetricsByName(a.chartData,b);for(var c=_.pluck(a.chartData,b),e=_.pluck(a.chartData,"t"),f=_.pluck(a.chartData,"n"),g=[],j=[],k=_.reduce(e,function(a,b){return a+b},0),l=0;l<c.length;l++){{e[l]/k*100}g[l]={data:[[0,e[l]]],label:c[l]}}for(var l=(_.reduce(f,function(a,b){return a+b},0),0);l<c.length;l++){{f[l]/k*100}j[l]={data:[[0,f[l]]],label:c[l]}}return a.chartDPTotal={},a.chartDPTotal.dp=g,a.chartDPNew={},a.chartDPNew.dp=j,a},a.clearObject=function(a){return a?(a.t||(a.t=0),a.n||(a.n=0),a.u||(a.u=0)):a={t:0,n:0,u:0},a},a.getBars=function(){return countlyCommon.extractBarData(h,i,this.clearObject)}},a.initializeTextSelect=function(){function a(a,b){a.removeClass("req");var c=a.find(".select-items");return c.length?void(a.find(".select-items").is(":visible")&&!b?a.find(".select-items").hide():(a.find(".select-items").show(),a.find(".select-items>div").addClass("scroll-list"),a.find(".scroll-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}))):!1}b("#content-container").on("click",".cly-text-select",function(c){return b(this).hasClass("disabled")?!0:(a(b(this)),b("#date-picker").hide(),void c.stopPropagation())}),b("#content-container").on("click",".select-items .item",function(){var a=b(this).parents(".cly-text-select").find(".text");a.text(b(this).text()),a.data("value",b(this).data("value")),a.val(b(this).text())}),b("#content-container").on("keyup",".cly-text-select input",function(){a(b(this).parents(".cly-text-select"),!0),b(this).data("value",b(this).val()),b(this).val()?(b(this).parents(".cly-text-select").find(".item:not(:contains('"+b(this).val()+"'))").addClass("hidden"),b(this).parents(".cly-text-select").find(".item:contains('"+b(this).val()+"')").removeClass("hidden")):b(this).parents(".cly-text-select").find(".item").removeClass("hidden")}),b(window).click(function(){b(".select-items").hide()})},a.initializeHugeDropdown=function(){var a;b("#content-container").on("mouseenter",".cly-huge-dropdown-activator",function(){clearInterval(a);var c=b(this).next(".cly-huge-dropdown");c.trigger("huge-dropdown-init"),c.find(".scroll").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}),c.find(".button-container .title").text(b(this).text()),c.fadeIn("slow")}),b("#content-container").on("mouseleave",".cly-huge-dropdown",function(){var c=b(this);a=setTimeout(function(){c.fadeOut("fast")},500)}),b("#content-container").on("mouseenter",".cly-huge-dropdown",function(){clearInterval(a)}),b("#content-container").on("close",".cly-huge-dropdown",function(){b(this).fadeOut("fast")})},a.revealDialog=c,a.changeDialogHeight=d,a.removeDialog=function(a){a.remove(),b("#overlay").fadeOut()},b(document).ready(function(){b("#overlay").click(function(){var a=b(".dialog:visible:not(.cly-loading)");a.length&&(a.fadeOut().remove(),b(this).hide())}),b("#dialog-ok, #dialog-cancel, #dialog-continue").live("click",function(){b(this).parents(".dialog:visible").fadeOut().remove(),b(".dialog:visible").length||b("#overlay").hide()}),b(document).keyup(function(a){27==a.keyCode&&(b(".dialog:visible").animate({top:0,opacity:0},{duration:1e3,easing:"easeOutQuart",complete:function(){b(this).remove()}}),b("#overlay").hide())})})}(window.CountlyHelpers=window.CountlyHelpers||{},jQuery),$.expr[":"].contains=$.expr.createPseudo(function(a){return function(b){return $(b).text().toUpperCase().indexOf(a.toUpperCase())>=0}}),window.DashboardView=countlyView.extend({selectedView:"#draw-total-sessions",initialize:function(){this.curMap="map-list-sessions",this.template=Handlebars.compile($("#dashboard-template").html())},beforeRender:function(){return this.maps={"map-list-sessions":{id:"total",label:jQuery.i18n.map["sidebar.analytics.sessions"],type:"number",metric:"t"},"map-list-users":{id:"total",label:jQuery.i18n.map["sidebar.analytics.users"],type:"number",metric:"u"},"map-list-new":{id:"total",label:jQuery.i18n.map["common.table.new-users"],type:"number",metric:"n"}},$.when(countlyUser.initialize(),countlyCarrier.initialize(),countlyDeviceDetails.initialize()).then(function(){})},afterRender:function(){var a=this;countlyLocation.drawGeoChart({height:290,metric:a.maps[a.curMap]})},pageScript:function(){$("#total-user-estimate-ind").on("click",function(){CountlyHelpers.alert($("#total-user-estimate-exp").html(),"black")}),$(".widget-content .inner").click(function(){$(".big-numbers").removeClass("active"),$(".big-numbers .select").removeClass("selected"),$(this).parent(".big-numbers").addClass("active"),$(this).find(".select").addClass("selected")}),$(".bar-inner").on({mouseenter:function(){var a=$(this).parent().next();a.text($(this).data("item")),a.css({color:$(this).css("background-color")})},mouseleave:function(){var a=$(this).parent().next();a.text(a.data("item")),a.css({color:$(this).parent().find(".bar-inner:first-child").css("background-color")})}});var a=this;$(".big-numbers .inner").click(function(){var b=$(this).find(".select").attr("id");return a.selectedView=="#"+b?!0:(a.selectedView="#"+b,void a.drawGraph())}),this.countryList(),$(".map-list .cly-button-group .icon-button").click(function(){$(".map-list .cly-button-group .icon-button").removeClass("active"),$(this).addClass("active"),a.curMap=$(this).attr("id"),countlyLocation.refreshGeoChart(a.maps[a.curMap]),a.countryList()}),app.localize()},drawGraph:function(){var a={};switch(this.selectedView){case"#draw-total-users":a=countlySession.getUserDPActive();break;case"#draw-new-users":a=countlySession.getUserDPNew();break;case"#draw-total-sessions":a=countlySession.getSessionDPTotal();break;case"#draw-time-spent":a=countlySession.getDurationDPAvg();break;case"#draw-total-time-spent":a=countlySession.getDurationDP();break;case"#draw-avg-events-served":a=countlySession.getEventsDPAvg()}_.defer(function(){countlyCommon.drawTimeGraph(a.chartDP,"#dashboard-graph")})},renderCommon:function(a,b){{var c=countlySession.getSessionData(),d=countlyLocation.getLocationData({maxCountries:7});countlySession.getSessionDPTotal()}this.locationData=d,c["page-title"]=countlyCommon.getDateRange(),c.usage=[{title:jQuery.i18n.map["common.total-sessions"],data:c.usage["total-sessions"],id:"draw-total-sessions",help:"dashboard.total-sessions"},{title:jQuery.i18n.map["common.total-users"],data:c.usage["total-users"],id:"draw-total-users",help:"dashboard.total-users"},{title:jQuery.i18n.map["common.new-users"],data:c.usage["new-users"],id:"draw-new-users",help:"dashboard.new-users"},{title:jQuery.i18n.map["dashboard.time-spent"],data:c.usage["total-duration"],id:"draw-total-time-spent",help:"dashboard.total-time-spent"},{title:jQuery.i18n.map["dashboard.avg-time-spent"],data:c.usage["avg-duration-per-session"],id:"draw-time-spent",help:"dashboard.avg-time-spent2"},{title:jQuery.i18n.map["dashboard.avg-reqs-received"],data:c.usage["avg-events"],id:"draw-avg-events-served",help:"dashboard.avg-reqs-received"}],c.bars=[{title:jQuery.i18n.map["common.bar.top-platform"],data:countlyDeviceDetails.getPlatformBars(),help:"dashboard.top-platforms"},{title:jQuery.i18n.map["common.bar.top-resolution"],data:countlyDeviceDetails.getResolutionBars(),help:"dashboard.top-resolutions"},{title:jQuery.i18n.map["common.bar.top-carrier"],data:countlyCarrier.getCarrierBars(),help:"dashboard.top-carriers"},{title:jQuery.i18n.map["common.bar.top-users"],data:countlySession.getTopUserBars(),help:"dashboard.top-users"}],this.templateData=c,a||($(this.el).html(this.template(this.templateData)),$(this.selectedView).parents(".big-numbers").addClass("active"),this.pageScript(),b||this.drawGraph())},restart:function(){this.refresh(!0)},refresh:function(a){var b=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=b)return!1;b.renderCommon(!0);var c=$("<div>"+b.template(b.templateData)+"</div>");$(".dashboard-summary").replaceWith(c.find(".dashboard-summary")),$(".widget-header .title").replaceWith(c.find(".widget-header .title")),$("#big-numbers-container").find(".big-numbers").each(function(b,d){var e=$(c.find("#big-numbers-container .big-numbers")[b]);if(a)$(d).find(".number").replaceWith(e.find(".number"));else{var f=$(d).find(".number .value"),g=parseFloat(f.text())||0,h=f.text().replace(g,""),i=parseFloat(e.find(".number .value").text()),j=e.find(".number .value").text().replace(i,"");i!=g&&(g>i||j.length&&j!=h?$(d).find(".number").replaceWith(e.find(".number")):jQuery({someValue:g,currEl:f}).animate({someValue:i},{duration:2e3,easing:"easeInOutQuint",step:function(){this.currEl.text(-1==(i+"").indexOf(".")?Math.round(this.someValue)+j:parseFloat(this.someValue.toFixed(1))+j);

}}))}$(d).find(".trend").replaceWith(e.find(".trend")),$(d).find(".spark").replaceWith(e.find(".spark"))}),b.drawGraph(),$(".usparkline").peity("bar",{width:"100%",height:"30",colour:"#6BB96E",strokeColour:"#6BB96E",strokeWidth:2}),$(".dsparkline").peity("bar",{width:"100%",height:"30",colour:"#C94C4C",strokeColour:"#C94C4C",strokeWidth:2}),0==c.find("#map-list-right").length&&$("#map-list-right").remove(),$("#map-list-right").length?$("#map-list-right").replaceWith(c.find("#map-list-right")):$(".widget.map-list").prepend(c.find("#map-list-right")),b.pageScript()})},countryList:function(){var a=this;$("#map-list-right").empty();for(var b,c=0;c<a.locationData.length;c++)b=a.locationData[c],$("#map-list-right").append('<div class="map-list-item"><div class="flag" style="background-image:url(\''+countlyGlobal.cdn+"images/flags/"+b.code+'.png\');"></div><div class="country-name">'+b.country+'</div><div class="total">'+b[a.maps[a.curMap].metric]+"</div></div>")},destroy:function(){$("#content-top").html("")}}),window.SessionView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(a){var b=countlySession.getSessionData(),c=countlySession.getSessionDP();this.templateData={"page-title":jQuery.i18n.map["sessions.title"],"logo-class":"sessions","big-numbers":{count:3,items:[{title:jQuery.i18n.map["common.total-sessions"],total:b.usage["total-sessions"].total,trend:b.usage["total-sessions"].trend,help:"sessions.total-sessions"},{title:jQuery.i18n.map["common.new-sessions"],total:b.usage["new-users"].total,trend:b.usage["new-users"].trend,help:"sessions.new-sessions"},{title:jQuery.i18n.map["common.unique-sessions"],total:b.usage["total-users"].total,trend:b.usage["total-users"].trend,help:"sessions.unique-sessions"}]}},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawTimeGraph(c.chartDP,"#dashboard-graph"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:c.chartData,aoColumns:[{mData:"date",sType:"customDate",sTitle:jQuery.i18n.map["common.date"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.unique-sessions"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0),newPage=$("<div>"+a.template(a.templateData)+"</div>"),$(a.el).find("#big-numbers-container").html(newPage.find("#big-numbers-container").html());var b=countlySession.getSessionDP();countlyCommon.drawTimeGraph(b.chartDP,"#dashboard-graph"),CountlyHelpers.refreshTable(a.dtable,b.chartData),app.localize()})}}),window.UserView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(a){var b=countlySession.getSessionData(),c=countlySession.getUserDP();this.templateData={"page-title":jQuery.i18n.map["users.title"],"logo-class":"users","big-numbers":{count:3,items:[{title:jQuery.i18n.map["common.total-users"],total:b.usage["total-users"].total,trend:b.usage["total-users"].trend,help:"users.total-users"},{title:jQuery.i18n.map["common.new-users"],total:b.usage["new-users"].total,trend:b.usage["new-users"].trend,help:"users.new-users"},{title:jQuery.i18n.map["common.returning-users"],total:b.usage["returning-users"].total,trend:b.usage["returning-users"].trend,help:"users.returning-users"}]}},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawTimeGraph(c.chartDP,"#dashboard-graph"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:c.chartData,aoColumns:[{mData:"date",sType:"customDate",sTitle:jQuery.i18n.map["common.date"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]},{mData:"returning",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.returning-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0),newPage=$("<div>"+a.template(a.templateData)+"</div>"),$(a.el).find("#big-numbers-container").replaceWith(newPage.find("#big-numbers-container"));var b=countlySession.getUserDP();countlyCommon.drawTimeGraph(b.chartDP,"#dashboard-graph"),CountlyHelpers.refreshTable(a.dtable,b.chartData),app.localize()})}}),window.AllAppsView=countlyView.extend({selectedView:"#draw-total-sessions",selectedApps:{all:!0},selectedCount:0,initialize:function(){this.template=Handlebars.compile($("#template-allapps").html())},beforeRender:function(){return $.when(countlyAllApps.initialize()).then(function(){})},pageScript:function(){$(".widget-content .inner").click(function(){$(".big-numbers").removeClass("active"),$(".big-numbers .select").removeClass("selected"),$(this).parent(".big-numbers").addClass("active"),$(this).find(".select").addClass("selected")});var a=this;$(".big-numbers .inner").click(function(){var b=$(this).find(".select").attr("id");return a.selectedView=="#"+b?!0:(a.selectedView="#"+b,void a.drawGraph())}),app.localize()},drawGraph:function(){var a,b,c=[],d=countlyAllApps.getSessionData(),e=0;for(var f in this.selectedApps)try{a=d[f][this.selectedView],b=countlyCommon.GRAPH_COLORS[e],c.push("all"==f?{data:a.data,label:a.label+" for All Apps",color:b}:{data:a.data,label:a.label+" for "+countlyGlobal.apps[f].name,color:b}),$("#"+f+" .color").css("background-color",b),e++}catch(g){}_.defer(function(){countlyCommon.drawTimeGraph(c,"#dashboard-graph")})},renderCommon:function(a){$("#sidebar-app-select").find(".text").text(jQuery.i18n.map["allapps.title"]),$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"images/favicon.png')"),$("#sidebar-menu > .item").addClass("hide"),$("#management-menu").removeClass("hide"),$("#allapps-menu").removeClass("hide").css("display","block");var b=countlyAllApps.getData();this.templateData={"page-title":jQuery.i18n.map["allapps.title"],"logo-class":"platforms",usage:[{title:jQuery.i18n.map["common.total-sessions"],data:0,id:"draw-total-sessions",help:"dashboard.total-sessions"},{title:jQuery.i18n.map["common.total-users"],data:0,id:"draw-total-users",help:"dashboard.total-users"},{title:jQuery.i18n.map["common.new-users"],data:0,id:"draw-new-users",help:"dashboard.new-users"},{title:jQuery.i18n.map["dashboard.time-spent"],data:0,id:"draw-total-time-spent",help:"dashboard.total-time-spent"},{title:jQuery.i18n.map["dashboard.avg-time-spent"],data:0,id:"draw-time-spent",help:"dashboard.avg-time-spent2"},{title:jQuery.i18n.map["dashboard.avg-reqs-received"],data:0,id:"draw-avg-events-served",help:"dashboard.avg-reqs-received"}]};var c=this;a||($(this.el).html(this.template(this.templateData)),$(this.selectedView).parents(".big-numbers").addClass("active"),this.pageScript(),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b,fnRowCallback:function(a,b){$(a).attr("id",b._id)},aoColumns:[{mData:function(a){return c.selectedApps[a._id]?"<i class='check fa fa-check'></i>":"<i class='check fa fa-unchecked'></i>"},sWidth:"10px",bSortable:!1},{mData:function(a,b){if("display"==b){var c;return c="all"==a._id?"<div class='logo' style='background-image: url("+countlyGlobal.path+"/images/favicon.png);'></div> ":"<div class='logo' style='background-image: url("+countlyGlobal.cdn+"appimages/"+a._id+".png);'></div> ",c+a.name+"<div class='color'></div>"}return a.name},sType:"string",sTitle:jQuery.i18n.map["allapps.app-name"],sClass:"break"},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.sessions.trend+"trend.png);'></div> "+a.sessions.total:a.sessions.total},sType:"numeric",sTitle:jQuery.i18n.map["allapps.total-sessions"]},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.users.trend+"trend.png);'></div> "+a.users.total:a.users.total},sType:"numeric",sTitle:jQuery.i18n.map["allapps.total-users"]},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.newusers.trend+"trend.png);'></div> "+a.newusers.total:a.newusers.total},sType:"numeric",sTitle:jQuery.i18n.map["allapps.new-users"]},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.duration.trend+"trend.png);'></div> "+countlyCommon.timeString(a.duration.total):a.duration.total},sType:"numeric",sTitle:jQuery.i18n.map["allapps.total-duration"]},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.avgduration.trend+"trend.png);'></div> "+countlyCommon.timeString(a.avgduration.total):a.avgduration.total},sType:"numeric",sTitle:jQuery.i18n.map["allapps.average-duration"]}]})),this.drawGraph(),$(".dataTable-bottom").append("<div clas='dataTables_info' style='float: right; margin-top:2px; margin-right: 10px;'>Maximum number of applications to be compared (10)</div>"),$(".d-table").stickyTableHeaders(),$(".allapps tbody").on("click","tr",function(a){var b=$(a.target).closest("td"),d=$(this);if(d.children().first().is(b))c.selectedApps[d.attr("id")]?(d.find(".check").removeClass("fa fa-check").addClass("fa fa-unchecked"),d.find(".color").css("background-color","transparent"),delete c.selectedApps[d.attr("id")],"all"!=d.attr("id")&&c.selectedCount--,0==c.selectedCount&&($("#empty-graph").show(),$(".big-numbers").removeClass("active"),$(".big-numbers .select").removeClass("selected"))):(c.selectedCount<10||"all"==d.attr("id"))&&(0==c.selectedCount&&($("#empty-graph").hide(),$(c.selectedView).parents(".big-numbers").addClass("active")),"all"==d.attr("id")?($(".check.icon-check").removeClass("fa fa-check").addClass("fa fa-unchecked"),$(".d-table").find(".color").css("background-color","transparent"),c.selectedApps={},c.selectedCount=0):(c.selectedApps.all&&($(".d-table #all .check.icon-check").removeClass("fa fa-check").addClass("fa fa-unchecked"),$(".d-table #all").find(".color").css("background-color","transparent"),delete c.selectedApps.all),c.selectedCount++),d.find(".check").removeClass("fa fa-unchecked").addClass("fa fa-check"),c.selectedApps[d.attr("id")]=!0),c.drawGraph();else if("all"!=d.attr("id")){var e=c.dtable.fnGetData(this);countlyAllApps.setApp(d.attr("id")),$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"appimages/"+d.attr("id")+".png')"),$("#sidebar-app-select").find(".text").text(e.name),$("#sidebar-menu > .item").removeClass("hide"),$("#allapps-menu").css("display","none"),window.location.hash="#/"}}))},refresh:function(){var a=this;$.when(countlyAllApps.initialize()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0),newPage=$("<div>"+a.template(a.templateData)+"</div>");var b=countlyAllApps.getData();CountlyHelpers.refreshTable(a.dtable,b),a.drawGraph(),app.localize()})}}),window.LoyaltyView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(a){var b=countlyUser.getLoyaltyData();this.templateData={"page-title":jQuery.i18n.map["user-loyalty.title"],"logo-class":"loyalty","chart-helper":"loyalty.chart","table-helper":"loyalty.table"},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"l",sType:"loyalty",sTitle:jQuery.i18n.map["user-loyalty.table.session-count"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.number-of-users"]},{mData:"percent",sType:"percent",sTitle:jQuery.i18n.map["common.percent"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=a)return!1;var b=countlyUser.getLoyaltyData();countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),CountlyHelpers.refreshTable(a.dtable,b.chartData)})}}),window.CountriesView=countlyView.extend({cityView:store.get("countly_location_city")?store.get("countly_active_app"):!1,initialize:function(){this.curMap="map-list-sessions",this.template=Handlebars.compile($("#template-analytics-countries").html())},beforeRender:function(){return this.maps={"map-list-sessions":{id:"total",label:jQuery.i18n.map["sidebar.analytics.sessions"],type:"number",metric:"t"},"map-list-users":{id:"total",label:jQuery.i18n.map["sidebar.analytics.users"],type:"number",metric:"u"},"map-list-new":{id:"total",label:jQuery.i18n.map["common.table.new-users"],type:"number",metric:"n"}},$.when(countlyUser.initialize(),countlyCity.initialize()).then(function(){})},drawTable:function(){var a,b=this.cityView?jQuery.i18n.map["countries.table.city"]:jQuery.i18n.map["countries.table.country"],c="country_flag";this.cityView?(a=countlyCity.getLocationData(),c="city"):a=countlyLocation.getLocationData();var d=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID];d&&d.country&&$("#toggle-map").text(countlyLocation.getCountryName(d.country)),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a,aoColumns:[{mData:c,sTitle:b},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders()},renderCommon:function(a){var b=countlySession.getSessionData();this.templateData={"page-title":jQuery.i18n.map["countries.title"],"logo-class":"countries","big-numbers":{count:3,items:[{title:jQuery.i18n.map["common.total-sessions"],total:b.usage["total-sessions"].total,trend:b.usage["total-sessions"].trend,help:"countries.total-sessions"},{title:jQuery.i18n.map["common.total-users"],total:b.usage["total-users"].total,trend:b.usage["total-users"].trend,help:"countries.total-users"},{title:jQuery.i18n.map["common.new-users"],total:b.usage["new-users"].total,trend:b.usage["new-users"].trend,help:"countries.new-users"}]},"chart-helper":"countries.chart","table-helper":"countries.table"};var c=this;$(document).bind("selectMapCountry",function(){c.cityView=!0,store.set("countly_location_city",!0),$("#toggle-map").addClass("active"),countlyCity.drawGeoChart({height:450,metric:c.maps[c.curMap]}),c.refresh(!0)}),a||($(this.el).html(this.template(this.templateData)),this.cityView?(countlyCity.drawGeoChart({height:450,metric:c.maps[c.curMap]}),$("#toggle-map").addClass("active")):countlyLocation.drawGeoChart({height:450,metric:c.maps[c.curMap]}),this.drawTable(),countlyCommon.CITY_DATA===!1&&($("#toggle-map").hide(),store.set("countly_location_city",!1)),$("#toggle-map").on("click",function(){$(this).hasClass("active")?(c.cityView=!1,countlyLocation.drawGeoChart({height:450,metric:c.maps[c.curMap]}),$(this).removeClass("active"),c.refresh(!0),store.set("countly_location_city",!1)):(c.cityView=!0,countlyCity.drawGeoChart({height:450,metric:c.maps[c.curMap]}),$(this).addClass("active"),c.refresh(!0),store.set("countly_location_city",!0))}),$(".geo-switch .cly-button-group .icon-button").click(function(){$(".geo-switch .cly-button-group .icon-button").removeClass("active"),$(this).addClass("active"),c.curMap=$(this).attr("id"),c.cityView?countlyCity.refreshGeoChart(c.maps[c.curMap]):countlyLocation.refreshGeoChart(c.maps[c.curMap])}))},refresh:function(a){var b=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=b)return!1;if(b.renderCommon(!0),newPage=$("<div>"+b.template(b.templateData)+"</div>"),$(b.el).find("#big-numbers-container").replaceWith(newPage.find("#big-numbers-container")),a)b.drawTable();else{var c;b.cityView?(c=countlyCity.getLocationData(),countlyCity.refreshGeoChart(b.maps[b.curMap])):(c=countlyLocation.getLocationData(),countlyLocation.refreshGeoChart(b.maps[b.curMap])),CountlyHelpers.refreshTable(b.dtable,c)}app.localize()})}}),window.FrequencyView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(a){var b=countlyUser.getFrequencyData();this.templateData={"page-title":jQuery.i18n.map["session-frequency.title"],"logo-class":"frequency","chart-helper":"frequency.chart","table-helper":"frequency.table"},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"f",sType:"frequency",sTitle:jQuery.i18n.map["session-frequency.table.time-after"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.number-of-users"]},{mData:"percent",sType:"percent",sTitle:jQuery.i18n.map["common.percent"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=a)return!1;var b=countlyUser.getFrequencyData();countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),CountlyHelpers.refreshTable(a.dtable,b.chartData)})}}),window.DeviceView=countlyView.extend({beforeRender:function(){return $.when(countlyDevice.initialize(),countlyDeviceDetails.initialize()).then(function(){})},pageScript:function(){$(".bar-inner").on({mouseenter:function(){var a=$(this).parent().next();a.text($(this).data("item")),a.css({color:$(this).css("background-color")})},mouseleave:function(){var a=$(this).parent().next();a.text(a.data("item")),a.css({color:$(this).parent().find(".bar-inner:first-child").css("background-color")})}}),app.localize()},renderCommon:function(a){var b=countlyDevice.getDeviceData();this.templateData={"page-title":jQuery.i18n.map["devices.title"],"logo-class":"devices","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["common.total-users"],right:jQuery.i18n.map["common.new-users"]},bars:[{title:jQuery.i18n.map["common.bar.top-platform"],data:countlyDeviceDetails.getPlatformBars(),help:"dashboard.top-platforms"},{title:jQuery.i18n.map["common.bar.top-platform-version"],data:countlyDeviceDetails.getOSVersionBars(),help:"devices.platform-versions2"},{title:jQuery.i18n.map["common.bar.top-resolution"],data:countlyDeviceDetails.getResolutionBars(),help:"dashboard.top-resolutions"}],"chart-helper":"devices.chart","table-helper":""},a||($(this.el).html(this.template(this.templateData)),this.pageScript(),countlyCommon.drawGraph(b.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDPNew,"#dashboard-graph2","pie"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"device",sTitle:jQuery.i18n.map["devices.table.device"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0),newPage=$("<div>"+a.template(a.templateData)+"</div>"),$(a.el).find(".dashboard-summary").replaceWith(newPage.find(".dashboard-summary"));var b=countlyDevice.getDeviceData();countlyCommon.drawGraph(b.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDPNew,"#dashboard-graph2","pie"),CountlyHelpers.refreshTable(a.dtable,b.chartData),a.pageScript()})}}),window.PlatformView=countlyView.extend({activePlatform:null,beforeRender:function(){return $.when(countlyDeviceDetails.initialize()).then(function(){})},pageScript:function(){var a=this;a.activePlatform?$(".graph-segment[data-name='"+a.activePlatform+"']").addClass("active"):$(".graph-segment:first-child").addClass("active"),$(".graph-segment").on("click",function(){a.activePlatform=$(this).data("name"),$(".graph-segment").removeClass("active"),$(this).addClass("active"),a.refresh()}),app.localize()},renderCommon:function(a){var b=countlyDeviceDetails.getOSVersionData(this.activePlatform),c=countlyDeviceDetails.getPlatformData();this.templateData={"page-title":jQuery.i18n.map["platforms.title"],"logo-class":"platforms","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["platforms.pie-left"],right:jQuery.i18n.map["platforms.pie-right"]},"graph-segmentation":b.os,"chart-helper":"platform-versions.chart","table-helper":"","two-tables":!0},a||($(this.el).html(this.template(this.templateData)),this.pageScript(),countlyCommon.drawGraph(c.chartDP,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDP,"#dashboard-graph2","pie"),this.dtable=$("#dataTableOne").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:c.chartData,aoColumns:[{mData:"os_",sTitle:jQuery.i18n.map["platforms.table.platform"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),this.dtableTwo=$("#dataTableTwo").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"os_version",sTitle:jQuery.i18n.map["platforms.table.platform-version"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$("#dataTableTwo").stickyTableHeaders())},refresh:function(){var a=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0);var b=countlyDeviceDetails.getOSVersionData(a.activePlatform),c=countlyDeviceDetails.getPlatformData(),d=$("<div>"+a.template(a.templateData)+"</div>");$(a.el).find(".dashboard-summary").replaceWith(d.find(".dashboard-summary")),$(a.el).find(".graph-segment-container").replaceWith(d.find(".graph-segment-container")),countlyCommon.drawGraph(c.chartDP,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDP,"#dashboard-graph2","pie"),CountlyHelpers.refreshTable(a.dtable,c.chartData),CountlyHelpers.refreshTable(a.dtableTwo,b.chartData),a.pageScript()})}}),window.AppVersionView=countlyView.extend({beforeRender:function(){return $.when(countlyDeviceDetails.initialize()).then(function(){})},renderCommon:function(a){var b=countlyAppVersion.getAppVersionData();this.templateData={"page-title":jQuery.i18n.map["app-versions.title"],"logo-class":"app-versions","chart-helper":"app-versions.chart","table-helper":""},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"app_version",sTitle:jQuery.i18n.map["app-versions.table.app-version"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=a)return!1;var b=countlyAppVersion.getAppVersionData();countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),CountlyHelpers.refreshTable(a.dtable,b.chartData)})}}),window.CarrierView=countlyView.extend({beforeRender:function(){return $.when(countlyCarrier.initialize()).then(function(){})},renderCommon:function(a){var b=countlyCarrier.getCarrierData();this.templateData={"page-title":jQuery.i18n.map["carriers.title"],"logo-class":"carriers","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["common.total-users"],right:jQuery.i18n.map["common.new-users"]},"chart-helper":"carriers.chart","table-helper":""},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(b.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDPNew,"#dashboard-graph2","pie"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"carrier",sTitle:jQuery.i18n.map["carriers.table.carrier"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=a)return!1;var b=countlyCarrier.getCarrierData();countlyCommon.drawGraph(b.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDPNew,"#dashboard-graph2","pie"),CountlyHelpers.refreshTable(a.dtable,b.chartData)})}}),window.ResolutionView=countlyView.extend({beforeRender:function(){return $.when(countlyDeviceDetails.initialize()).then(function(){})},renderCommon:function(a){var b=countlyDeviceDetails.getResolutionData();this.templateData={"page-title":jQuery.i18n.map["resolutions.title"],"logo-class":"resolutions","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["common.total-users"],right:jQuery.i18n.map["common.new-users"]},"chart-helper":"resolutions.chart"},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(b.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDPNew,"#dashboard-graph2","pie"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"resolution",sTitle:jQuery.i18n.map["resolutions.table.resolution"]},{mData:function(a){return parseInt(a.width.replace(/<(?:.|\n)*?>/gm,""))},sType:"numeric",sTitle:jQuery.i18n.map["resolutions.table.width"]},{mData:function(a){return parseInt(a.height.replace(/<(?:.|\n)*?>/gm,""))},sType:"numeric",sTitle:jQuery.i18n.map["resolutions.table.height"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(countlyDeviceDetails.initialize()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0),newPage=$("<div>"+a.template(a.templateData)+"</div>"),$(a.el).find(".dashboard-summary").replaceWith(newPage.find(".dashboard-summary"));var b=countlyDeviceDetails.getResolutionData();countlyCommon.drawGraph(b.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(b.chartDPNew,"#dashboard-graph2","pie"),CountlyHelpers.refreshTable(a.dtable,b.chartData)})}}),window.DurationView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(a){var b=countlySession.getDurationData();this.templateData={"page-title":jQuery.i18n.map["session-duration.title"],"logo-class":"durations","chart-helper":"durations.chart","table-helper":"durations.table"},a||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:b.chartData,aoColumns:[{mData:"ds",sType:"session-duration",sTitle:jQuery.i18n.map["session-duration.table.duration"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.number-of-users"]},{mData:"percent",sType:"percent",sTitle:jQuery.i18n.map["common.percent"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var a=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=a)return!1;var b=countlySession.getDurationData();countlyCommon.drawGraph(b.chartDP,"#dashboard-graph","bar"),CountlyHelpers.refreshTable(a.dtable,b.chartData)})}}),window.ManageAppsView=countlyView.extend({initialize:function(){this.template=Handlebars.compile($("#template-management-applications").html())},destroy:function(){app.closeAppTooltip(),app.disableAppTooltip()},getAppCategories:function(){return{1:jQuery.i18n.map["application-category.books"],2:jQuery.i18n.map["application-category.business"],3:jQuery.i18n.map["application-category.education"],4:jQuery.i18n.map["application-category.entertainment"],5:jQuery.i18n.map["application-category.finance"],6:jQuery.i18n.map["application-category.games"],7:jQuery.i18n.map["application-category.health-fitness"],8:jQuery.i18n.map["application-category.lifestyle"],9:jQuery.i18n.map["application-category.medical"],10:jQuery.i18n.map["application-category.music"],11:jQuery.i18n.map["application-category.navigation"],12:jQuery.i18n.map["application-category.news"],13:jQuery.i18n.map["application-category.photography"],14:jQuery.i18n.map["application-category.productivity"],15:jQuery.i18n.map["application-category.reference"],16:jQuery.i18n.map["application-category.social-networking"],17:jQuery.i18n.map["application-category.sports"],18:jQuery.i18n.map["application-category.travel"],19:jQuery.i18n.map["application-category.utilities"],20:jQuery.i18n.map["application-category.weather"]}},getTimeZones:function(){return{AF:{n:"Afghanistan",z:[{"(GMT+04:30) Kabul":"Asia/Kabul"}]},AL:{n:"Albania",z:[{"(GMT+01:00) Tirane":"Europe/Tirane"}]},DZ:{n:"Algeria",z:[{"(GMT+01:00) Algiers":"Africa/Algiers"}]},AS:{n:"American Samoa",z:[{"(GMT-11:00) Pago Pago":"Pacific/Pago_Pago"}]},AD:{n:"Andorra",z:[{"(GMT+01:00) Andorra":"Europe/Andorra"}]},AO:{n:"Angola",z:[{"(GMT+01:00) Luanda":"Africa/Luanda"}]},AI:{n:"Anguilla",z:[{"(GMT-04:00) Anguilla":"America/Anguilla"}]},AQ:{n:"Antarctica",z:[{"(GMT-04:00) Palmer":"Antarctica/Palmer"},{"(GMT-03:00) Rothera":"Antarctica/Rothera"},{"(GMT+03:00) Syowa":"Antarctica/Syowa"},{"(GMT+05:00) Mawson":"Antarctica/Mawson"
},{"(GMT+06:00) Vostok":"Antarctica/Vostok"},{"(GMT+07:00) Davis":"Antarctica/Davis"},{"(GMT+08:00) Casey":"Antarctica/Casey"},{"(GMT+10:00) Dumont D'Urville":"Antarctica/DumontDUrville"}]},AG:{n:"Antigua and Barbuda",z:[{"(GMT-04:00) Antigua":"America/Antigua"}]},AR:{n:"Argentina",z:[{"(GMT-03:00) Buenos Aires":"America/Buenos_Aires"}]},AM:{n:"Armenia",z:[{"(GMT+04:00) Yerevan":"Asia/Yerevan"}]},AW:{n:"Aruba",z:[{"(GMT-04:00) Aruba":"America/Aruba"}]},AU:{n:"Australia",z:[{"(GMT+08:00) Western Time - Perth":"Australia/Perth"},{"(GMT+09:30) Central Time - Adelaide":"Australia/Adelaide"},{"(GMT+09:30) Central Time - Darwin":"Australia/Darwin"},{"(GMT+10:00) Eastern Time - Brisbane":"Australia/Brisbane"},{"(GMT+10:00) Eastern Time - Hobart":"Australia/Hobart"},{"(GMT+10:00) Eastern Time - Melbourne, Sydney":"Australia/Sydney"}]},AT:{n:"Austria",z:[{"(GMT+01:00) Vienna":"Europe/Vienna"}]},AZ:{n:"Azerbaijan",z:[{"(GMT+04:00) Baku":"Asia/Baku"}]},BS:{n:"Bahamas",z:[{"(GMT-05:00) Nassau":"America/Nassau"}]},BH:{n:"Bahrain",z:[{"(GMT+03:00) Bahrain":"Asia/Bahrain"}]},BD:{n:"Bangladesh",z:[{"(GMT+06:00) Dhaka":"Asia/Dhaka"}]},BB:{n:"Barbados",z:[{"(GMT-04:00) Barbados":"America/Barbados"}]},BY:{n:"Belarus",z:[{"(GMT+03:00) Minsk":"Europe/Minsk"}]},BE:{n:"Belgium",z:[{"(GMT+01:00) Brussels":"Europe/Brussels"}]},BZ:{n:"Belize",z:[{"(GMT-06:00) Belize":"America/Belize"}]},BJ:{n:"Benin",z:[{"(GMT+01:00) Porto-Novo":"Africa/Porto-Novo"}]},BM:{n:"Bermuda",z:[{"(GMT-04:00) Bermuda":"Atlantic/Bermuda"}]},BT:{n:"Bhutan",z:[{"(GMT+06:00) Thimphu":"Asia/Thimphu"}]},BO:{n:"Bolivia",z:[{"(GMT-04:00) La Paz":"America/La_Paz"}]},BA:{n:"Bosnia and Herzegovina",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Sarajevo"}]},BW:{n:"Botswana",z:[{"(GMT+02:00) Gaborone":"Africa/Gaborone"}]},BR:{n:"Brazil",z:[{"(GMT-04:00) Boa Vista":"America/Boa_Vista"},{"(GMT-04:00) Campo Grande":"America/Campo_Grande"},{"(GMT-04:00) Cuiaba":"America/Cuiaba"},{"(GMT-04:00) Manaus":"America/Manaus"},{"(GMT-04:00) Porto Velho":"America/Porto_Velho"},{"(GMT-04:00) Rio Branco":"America/Rio_Branco"},{"(GMT-03:00) Araguaina":"America/Araguaina"},{"(GMT-03:00) Belem":"America/Belem"},{"(GMT-03:00) Fortaleza":"America/Fortaleza"},{"(GMT-03:00) Maceio":"America/Maceio"},{"(GMT-03:00) Recife":"America/Recife"},{"(GMT-03:00) Salvador":"America/Bahia"},{"(GMT-03:00) Sao Paulo":"America/Sao_Paulo"},{"(GMT-02:00) Noronha":"America/Noronha"}]},IO:{n:"British Indian Ocean Territory",z:[{"(GMT+06:00) Chagos":"Indian/Chagos"}]},VG:{n:"British Virgin Islands",z:[{"(GMT-04:00) Tortola":"America/Tortola"}]},BN:{n:"Brunei",z:[{"(GMT+08:00) Brunei":"Asia/Brunei"}]},BG:{n:"Bulgaria",z:[{"(GMT+02:00) Sofia":"Europe/Sofia"}]},BF:{n:"Burkina Faso",z:[{"(GMT+00:00) Ouagadougou":"Africa/Ouagadougou"}]},BI:{n:"Burundi",z:[{"(GMT+02:00) Bujumbura":"Africa/Bujumbura"}]},KH:{n:"Cambodia",z:[{"(GMT+07:00) Phnom Penh":"Asia/Phnom_Penh"}]},CM:{n:"Cameroon",z:[{"(GMT+01:00) Douala":"Africa/Douala"}]},CA:{n:"Canada",z:[{"(GMT-07:00) Mountain Time - Dawson Creek":"America/Dawson_Creek"},{"(GMT-08:00) Pacific Time - Vancouver":"America/Vancouver"},{"(GMT-08:00) Pacific Time - Whitehorse":"America/Whitehorse"},{"(GMT-06:00) Central Time - Regina":"America/Regina"},{"(GMT-07:00) Mountain Time - Edmonton":"America/Edmonton"},{"(GMT-07:00) Mountain Time - Yellowknife":"America/Yellowknife"},{"(GMT-06:00) Central Time - Winnipeg":"America/Winnipeg"},{"(GMT-05:00) Eastern Time - Iqaluit":"America/Iqaluit"},{"(GMT-05:00) Eastern Time - Montreal":"America/Montreal"},{"(GMT-05:00) Eastern Time - Toronto":"America/Toronto"},{"(GMT-04:00) Atlantic Time - Halifax":"America/Halifax"},{"(GMT-03:30) Newfoundland Time - St. Johns":"America/St_Johns"}]},CV:{n:"Cape Verde",z:[{"(GMT-01:00) Cape Verde":"Atlantic/Cape_Verde"}]},KY:{n:"Cayman Islands",z:[{"(GMT-05:00) Cayman":"America/Cayman"}]},CF:{n:"Central African Republic",z:[{"(GMT+01:00) Bangui":"Africa/Bangui"}]},TD:{n:"Chad",z:[{"(GMT+01:00) Ndjamena":"Africa/Ndjamena"}]},CL:{n:"Chile",z:[{"(GMT-06:00) Easter Island":"Pacific/Easter"},{"(GMT-04:00) Santiago":"America/Santiago"}]},CN:{n:"China",z:[{"(GMT+08:00) China Time - Beijing":"Asia/Shanghai"}]},CX:{n:"Christmas Island",z:[{"(GMT+07:00) Christmas":"Indian/Christmas"}]},CC:{n:"Cocos [Keeling] Islands",z:[{"(GMT+06:30) Cocos":"Indian/Cocos"}]},CO:{n:"Colombia",z:[{"(GMT-05:00) Bogota":"America/Bogota"}]},KM:{n:"Comoros",z:[{"(GMT+03:00) Comoro":"Indian/Comoro"}]},CD:{n:"Congo [DRC]",z:[{"(GMT+01:00) Kinshasa":"Africa/Kinshasa"},{"(GMT+02:00) Lubumbashi":"Africa/Lubumbashi"}]},CG:{n:"Congo [Republic]",z:[{"(GMT+01:00) Brazzaville":"Africa/Brazzaville"}]},CK:{n:"Cook Islands",z:[{"(GMT-10:00) Rarotonga":"Pacific/Rarotonga"}]},CR:{n:"Costa Rica",z:[{"(GMT-06:00) Costa Rica":"America/Costa_Rica"}]},CI:{n:"Côte d’Ivoire",z:[{"(GMT+00:00) Abidjan":"Africa/Abidjan"}]},HR:{n:"Croatia",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Zagreb"}]},CU:{n:"Cuba",z:[{"(GMT-05:00) Havana":"America/Havana"}]},CW:{n:"Curaçao",z:[{"(GMT-04:00) Curacao":"America/Curacao"}]},CY:{n:"Cyprus",z:[{"(GMT+02:00) Nicosia":"Asia/Nicosia"}]},CZ:{n:"Czech Republic",z:[{"(GMT+01:00) Central European Time - Prague":"Europe/Prague"}]},DK:{n:"Denmark",z:[{"(GMT+01:00) Copenhagen":"Europe/Copenhagen"}]},DJ:{n:"Djibouti",z:[{"(GMT+03:00) Djibouti":"Africa/Djibouti"}]},DM:{n:"Dominica",z:[{"(GMT-04:00) Dominica":"America/Dominica"}]},DO:{n:"Dominican Republic",z:[{"(GMT-04:00) Santo Domingo":"America/Santo_Domingo"}]},EC:{n:"Ecuador",z:[{"(GMT-06:00) Galapagos":"Pacific/Galapagos"},{"(GMT-05:00) Guayaquil":"America/Guayaquil"}]},EG:{n:"Egypt",z:[{"(GMT+02:00) Cairo":"Africa/Cairo"}]},SV:{n:"El Salvador",z:[{"(GMT-06:00) El Salvador":"America/El_Salvador"}]},GQ:{n:"Equatorial Guinea",z:[{"(GMT+01:00) Malabo":"Africa/Malabo"}]},ER:{n:"Eritrea",z:[{"(GMT+03:00) Asmera":"Africa/Asmera"}]},EE:{n:"Estonia",z:[{"(GMT+02:00) Tallinn":"Europe/Tallinn"}]},ET:{n:"Ethiopia",z:[{"(GMT+03:00) Addis Ababa":"Africa/Addis_Ababa"}]},FK:{n:"Falkland Islands [Islas Malvinas]",z:[{"(GMT-03:00) Stanley":"Atlantic/Stanley"}]},FO:{n:"Faroe Islands",z:[{"(GMT+00:00) Faeroe":"Atlantic/Faeroe"}]},FJ:{n:"Fiji",z:[{"(GMT+12:00) Fiji":"Pacific/Fiji"}]},FI:{n:"Finland",z:[{"(GMT+02:00) Helsinki":"Europe/Helsinki"}]},FR:{n:"France",z:[{"(GMT+01:00) Paris":"Europe/Paris"}]},GF:{n:"French Guiana",z:[{"(GMT-03:00) Cayenne":"America/Cayenne"}]},PF:{n:"French Polynesia",z:[{"(GMT-10:00) Tahiti":"Pacific/Tahiti"},{"(GMT-09:30) Marquesas":"Pacific/Marquesas"},{"(GMT-09:00) Gambier":"Pacific/Gambier"}]},TF:{n:"French Southern Territories",z:[{"(GMT+05:00) Kerguelen":"Indian/Kerguelen"}]},GA:{n:"Gabon",z:[{"(GMT+01:00) Libreville":"Africa/Libreville"}]},GM:{n:"Gambia",z:[{"(GMT+00:00) Banjul":"Africa/Banjul"}]},GE:{n:"Georgia",z:[{"(GMT+04:00) Tbilisi":"Asia/Tbilisi"}]},DE:{n:"Germany",z:[{"(GMT+01:00) Berlin":"Europe/Berlin"}]},GH:{n:"Ghana",z:[{"(GMT+00:00) Accra":"Africa/Accra"}]},GI:{n:"Gibraltar",z:[{"(GMT+01:00) Gibraltar":"Europe/Gibraltar"}]},GR:{n:"Greece",z:[{"(GMT+02:00) Athens":"Europe/Athens"}]},GL:{n:"Greenland",z:[{"(GMT-04:00) Thule":"America/Thule"},{"(GMT-03:00) Godthab":"America/Godthab"},{"(GMT-01:00) Scoresbysund":"America/Scoresbysund"},{"(GMT+00:00) Danmarkshavn":"America/Danmarkshavn"}]},GD:{n:"Grenada",z:[{"(GMT-04:00) Grenada":"America/Grenada"}]},GP:{n:"Guadeloupe",z:[{"(GMT-04:00) Guadeloupe":"America/Guadeloupe"}]},GU:{n:"Guam",z:[{"(GMT+10:00) Guam":"Pacific/Guam"}]},GT:{n:"Guatemala",z:[{"(GMT-06:00) Guatemala":"America/Guatemala"}]},GN:{n:"Guinea",z:[{"(GMT+00:00) Conakry":"Africa/Conakry"}]},GW:{n:"Guinea-Bissau",z:[{"(GMT+00:00) Bissau":"Africa/Bissau"}]},GY:{n:"Guyana",z:[{"(GMT-04:00) Guyana":"America/Guyana"}]},HT:{n:"Haiti",z:[{"(GMT-05:00) Port-au-Prince":"America/Port-au-Prince"}]},HN:{n:"Honduras",z:[{"(GMT-06:00) Central Time - Tegucigalpa":"America/Tegucigalpa"}]},HK:{n:"Hong Kong",z:[{"(GMT+08:00) Hong Kong":"Asia/Hong_Kong"}]},HU:{n:"Hungary",z:[{"(GMT+01:00) Budapest":"Europe/Budapest"}]},IS:{n:"Iceland",z:[{"(GMT+00:00) Reykjavik":"Atlantic/Reykjavik"}]},IN:{n:"India",z:[{"(GMT+05:30) India Standard Time":"Asia/Calcutta"}]},ID:{n:"Indonesia",z:[{"(GMT+07:00) Jakarta":"Asia/Jakarta"},{"(GMT+08:00) Makassar":"Asia/Makassar"},{"(GMT+09:00) Jayapura":"Asia/Jayapura"}]},IR:{n:"Iran",z:[{"(GMT+03:30) Tehran":"Asia/Tehran"}]},IQ:{n:"Iraq",z:[{"(GMT+03:00) Baghdad":"Asia/Baghdad"}]},IE:{n:"Ireland",z:[{"(GMT+00:00) Dublin":"Europe/Dublin"}]},IL:{n:"Israel",z:[{"(GMT+02:00) Jerusalem":"Asia/Jerusalem"}]},IT:{n:"Italy",z:[{"(GMT+01:00) Rome":"Europe/Rome"}]},JM:{n:"Jamaica",z:[{"(GMT-05:00) Jamaica":"America/Jamaica"}]},JP:{n:"Japan",z:[{"(GMT+09:00) Tokyo":"Asia/Tokyo"}]},JO:{n:"Jordan",z:[{"(GMT+02:00) Amman":"Asia/Amman"}]},KZ:{n:"Kazakhstan",z:[{"(GMT+05:00) Aqtau":"Asia/Aqtau"},{"(GMT+05:00) Aqtobe":"Asia/Aqtobe"},{"(GMT+06:00) Almaty":"Asia/Almaty"}]},KE:{n:"Kenya",z:[{"(GMT+03:00) Nairobi":"Africa/Nairobi"}]},KI:{n:"Kiribati",z:[{"(GMT+12:00) Tarawa":"Pacific/Tarawa"},{"(GMT+13:00) Enderbury":"Pacific/Enderbury"},{"(GMT+14:00) Kiritimati":"Pacific/Kiritimati"}]},KW:{n:"Kuwait",z:[{"(GMT+03:00) Kuwait":"Asia/Kuwait"}]},KG:{n:"Kyrgyzstan",z:[{"(GMT+06:00) Bishkek":"Asia/Bishkek"}]},LA:{n:"Laos",z:[{"(GMT+07:00) Vientiane":"Asia/Vientiane"}]},LV:{n:"Latvia",z:[{"(GMT+02:00) Riga":"Europe/Riga"}]},LB:{n:"Lebanon",z:[{"(GMT+02:00) Beirut":"Asia/Beirut"}]},LS:{n:"Lesotho",z:[{"(GMT+02:00) Maseru":"Africa/Maseru"}]},LR:{n:"Liberia",z:[{"(GMT+00:00) Monrovia":"Africa/Monrovia"}]},LY:{n:"Libya",z:[{"(GMT+02:00) Tripoli":"Africa/Tripoli"}]},LI:{n:"Liechtenstein",z:[{"(GMT+01:00) Vaduz":"Europe/Vaduz"}]},LT:{n:"Lithuania",z:[{"(GMT+02:00) Vilnius":"Europe/Vilnius"}]},LU:{n:"Luxembourg",z:[{"(GMT+01:00) Luxembourg":"Europe/Luxembourg"}]},MO:{n:"Macau",z:[{"(GMT+08:00) Macau":"Asia/Macau"}]},MK:{n:"Macedonia [FYROM]",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Skopje"}]},MG:{n:"Madagascar",z:[{"(GMT+03:00) Antananarivo":"Indian/Antananarivo"}]},MW:{n:"Malawi",z:[{"(GMT+02:00) Blantyre":"Africa/Blantyre"}]},MY:{n:"Malaysia",z:[{"(GMT+08:00) Kuala Lumpur":"Asia/Kuala_Lumpur"}]},MV:{n:"Maldives",z:[{"(GMT+05:00) Maldives":"Indian/Maldives"}]},ML:{n:"Mali",z:[{"(GMT+00:00) Bamako":"Africa/Bamako"}]},MT:{n:"Malta",z:[{"(GMT+01:00) Malta":"Europe/Malta"}]},MH:{n:"Marshall Islands",z:[{"(GMT+12:00) Kwajalein":"Pacific/Kwajalein"},{"(GMT+12:00) Majuro":"Pacific/Majuro"}]},MQ:{n:"Martinique",z:[{"(GMT-04:00) Martinique":"America/Martinique"}]},MR:{n:"Mauritania",z:[{"(GMT+00:00) Nouakchott":"Africa/Nouakchott"}]},MU:{n:"Mauritius",z:[{"(GMT+04:00) Mauritius":"Indian/Mauritius"}]},YT:{n:"Mayotte",z:[{"(GMT+03:00) Mayotte":"Indian/Mayotte"}]},MX:{n:"Mexico",z:[{"(GMT-07:00) Mountain Time - Hermosillo":"America/Hermosillo"},{"(GMT-08:00) Pacific Time - Tijuana":"America/Tijuana"},{"(GMT-07:00) Mountain Time - Chihuahua, Mazatlan":"America/Mazatlan"},{"(GMT-06:00) Central Time - Mexico City":"America/Mexico_City"}]},FM:{n:"Micronesia",z:[{"(GMT+10:00) Truk":"Pacific/Truk"},{"(GMT+11:00) Kosrae":"Pacific/Kosrae"},{"(GMT+11:00) Ponape":"Pacific/Ponape"}]},MD:{n:"Moldova",z:[{"(GMT+02:00) Chisinau":"Europe/Chisinau"}]},MC:{n:"Monaco",z:[{"(GMT+01:00) Monaco":"Europe/Monaco"}]},MN:{n:"Mongolia",z:[{"(GMT+07:00) Hovd":"Asia/Hovd"},{"(GMT+08:00) Choibalsan":"Asia/Choibalsan"},{"(GMT+08:00) Ulaanbaatar":"Asia/Ulaanbaatar"}]},MS:{n:"Montserrat",z:[{"(GMT-04:00) Montserrat":"America/Montserrat"}]},MA:{n:"Morocco",z:[{"(GMT+00:00) Casablanca":"Africa/Casablanca"}]},MZ:{n:"Mozambique",z:[{"(GMT+02:00) Maputo":"Africa/Maputo"}]},MM:{n:"Myanmar [Burma]",z:[{"(GMT+06:30) Rangoon":"Asia/Rangoon"}]},NA:{n:"Namibia",z:[{"(GMT+01:00) Windhoek":"Africa/Windhoek"}]},NR:{n:"Nauru",z:[{"(GMT+12:00) Nauru":"Pacific/Nauru"}]},NP:{n:"Nepal",z:[{"(GMT+05:45) Katmandu":"Asia/Katmandu"}]},NL:{n:"Netherlands",z:[{"(GMT+01:00) Amsterdam":"Europe/Amsterdam"}]},NC:{n:"New Caledonia",z:[{"(GMT+11:00) Noumea":"Pacific/Noumea"}]},NZ:{n:"New Zealand",z:[{"(GMT+12:00) Auckland":"Pacific/Auckland"}]},NI:{n:"Nicaragua",z:[{"(GMT-06:00) Managua":"America/Managua"}]},NE:{n:"Niger",z:[{"(GMT+01:00) Niamey":"Africa/Niamey"}]},NG:{n:"Nigeria",z:[{"(GMT+01:00) Lagos":"Africa/Lagos"}]},NU:{n:"Niue",z:[{"(GMT-11:00) Niue":"Pacific/Niue"}]},NF:{n:"Norfolk Island",z:[{"(GMT+11:30) Norfolk":"Pacific/Norfolk"}]},KP:{n:"North Korea",z:[{"(GMT+09:00) Pyongyang":"Asia/Pyongyang"}]},MP:{n:"Northern Mariana Islands",z:[{"(GMT+10:00) Saipan":"Pacific/Saipan"}]},NO:{n:"Norway",z:[{"(GMT+01:00) Oslo":"Europe/Oslo"}]},OM:{n:"Oman",z:[{"(GMT+04:00) Muscat":"Asia/Muscat"}]},PK:{n:"Pakistan",z:[{"(GMT+05:00) Karachi":"Asia/Karachi"}]},PW:{n:"Palau",z:[{"(GMT+09:00) Palau":"Pacific/Palau"}]},PS:{n:"Palestinian Territories",z:[{"(GMT+02:00) Gaza":"Asia/Gaza"}]},PA:{n:"Panama",z:[{"(GMT-05:00) Panama":"America/Panama"}]},PG:{n:"Papua New Guinea",z:[{"(GMT+10:00) Port Moresby":"Pacific/Port_Moresby"}]},PY:{n:"Paraguay",z:[{"(GMT-04:00) Asuncion":"America/Asuncion"}]},PE:{n:"Peru",z:[{"(GMT-05:00) Lima":"America/Lima"}]},PH:{n:"Philippines",z:[{"(GMT+08:00) Manila":"Asia/Manila"}]},PN:{n:"Pitcairn Islands",z:[{"(GMT-08:00) Pitcairn":"Pacific/Pitcairn"}]},PL:{n:"Poland",z:[{"(GMT+01:00) Warsaw":"Europe/Warsaw"}]},PT:{n:"Portugal",z:[{"(GMT-01:00) Azores":"Atlantic/Azores"},{"(GMT+00:00) Lisbon":"Europe/Lisbon"}]},PR:{n:"Puerto Rico",z:[{"(GMT-04:00) Puerto Rico":"America/Puerto_Rico"}]},QA:{n:"Qatar",z:[{"(GMT+03:00) Qatar":"Asia/Qatar"}]},RE:{n:"Réunion",z:[{"(GMT+04:00) Reunion":"Indian/Reunion"}]},RO:{n:"Romania",z:[{"(GMT+02:00) Bucharest":"Europe/Bucharest"}]},RU:{n:"Russia",z:[{"(GMT+03:00) Moscow-01 - Kaliningrad":"Europe/Kaliningrad"},{"(GMT+04:00) Moscow+00":"Europe/Moscow"},{"(GMT+04:00) Moscow+00 - Samara":"Europe/Samara"},{"(GMT+06:00) Moscow+02 - Yekaterinburg":"Asia/Yekaterinburg"},{"(GMT+07:00) Moscow+03 - Omsk, Novosibirsk":"Asia/Omsk"},{"(GMT+08:00) Moscow+04 - Krasnoyarsk":"Asia/Krasnoyarsk"},{"(GMT+09:00) Moscow+05 - Irkutsk":"Asia/Irkutsk"},{"(GMT+10:00) Moscow+06 - Yakutsk":"Asia/Yakutsk"},{"(GMT+11:00) Moscow+07 - Yuzhno-Sakhalinsk":"Asia/Vladivostok"},{"(GMT+12:00) Moscow+08 - Magadan":"Asia/Magadan"},{"(GMT+12:00) Moscow+08 - Petropavlovsk-Kamchatskiy":"Asia/Kamchatka"}]},RW:{n:"Rwanda",z:[{"(GMT+02:00) Kigali":"Africa/Kigali"}]},SH:{n:"Saint Helena",z:[{"(GMT+00:00) St Helena":"Atlantic/St_Helena"}]},KN:{n:"Saint Kitts and Nevis",z:[{"(GMT-04:00) St. Kitts":"America/St_Kitts"}]},LC:{n:"Saint Lucia",z:[{"(GMT-04:00) St. Lucia":"America/St_Lucia"}]},PM:{n:"Saint Pierre and Miquelon",z:[{"(GMT-03:00) Miquelon":"America/Miquelon"}]},VC:{n:"Saint Vincent and the Grenadines",z:[{"(GMT-04:00) St. Vincent":"America/St_Vincent"}]},WS:{n:"Samoa",z:[{"(GMT+13:00) Apia":"Pacific/Apia"}]},SM:{n:"San Marino",z:[{"(GMT+01:00) Rome":"Europe/San_Marino"}]},ST:{n:"São Tomé and Príncipe",z:[{"(GMT+00:00) Sao Tome":"Africa/Sao_Tome"}]},SA:{n:"Saudi Arabia",z:[{"(GMT+03:00) Riyadh":"Asia/Riyadh"}]},SN:{n:"Senegal",z:[{"(GMT+00:00) Dakar":"Africa/Dakar"}]},RS:{n:"Serbia",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Belgrade"}]},SC:{n:"Seychelles",z:[{"(GMT+04:00) Mahe":"Indian/Mahe"}]},SL:{n:"Sierra Leone",z:[{"(GMT+00:00) Freetown":"Africa/Freetown"}]},SG:{n:"Singapore",z:[{"(GMT+08:00) Singapore":"Asia/Singapore"}]},SK:{n:"Slovakia",z:[{"(GMT+01:00) Central European Time - Prague":"Europe/Bratislava"}]},SI:{n:"Slovenia",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Ljubljana"}]},SB:{n:"Solomon Islands",z:[{"(GMT+11:00) Guadalcanal":"Pacific/Guadalcanal"}]},SO:{n:"Somalia",z:[{"(GMT+03:00) Mogadishu":"Africa/Mogadishu"}]},ZA:{n:"South Africa",z:[{"(GMT+02:00) Johannesburg":"Africa/Johannesburg"}]},GS:{n:"South Georgia and the South Sandwich Islands",z:[{"(GMT-02:00) South Georgia":"Atlantic/South_Georgia"}]},KR:{n:"South Korea",z:[{"(GMT+09:00) Seoul":"Asia/Seoul"}]},ES:{n:"Spain",z:[{"(GMT+00:00) Canary Islands":"Atlantic/Canary"},{"(GMT+01:00) Ceuta":"Africa/Ceuta"},{"(GMT+01:00) Madrid":"Europe/Madrid"}]},LK:{n:"Sri Lanka",z:[{"(GMT+05:30) Colombo":"Asia/Colombo"}]},SD:{n:"Sudan",z:[{"(GMT+03:00) Khartoum":"Africa/Khartoum"}]},SR:{n:"Suriname",z:[{"(GMT-03:00) Paramaribo":"America/Paramaribo"}]},SJ:{n:"Svalbard and Jan Mayen",z:[{"(GMT+01:00) Oslo":"Arctic/Longyearbyen"}]},SZ:{n:"Swaziland",z:[{"(GMT+02:00) Mbabane":"Africa/Mbabane"}]},SE:{n:"Sweden",z:[{"(GMT+01:00) Stockholm":"Europe/Stockholm"}]},CH:{n:"Switzerland",z:[{"(GMT+01:00) Zurich":"Europe/Zurich"}]},SY:{n:"Syria",z:[{"(GMT+02:00) Damascus":"Asia/Damascus"}]},TW:{n:"Taiwan",z:[{"(GMT+08:00) Taipei":"Asia/Taipei"}]},TJ:{n:"Tajikistan",z:[{"(GMT+05:00) Dushanbe":"Asia/Dushanbe"}]},TZ:{n:"Tanzania",z:[{"(GMT+03:00) Dar es Salaam":"Africa/Dar_es_Salaam"}]},TH:{n:"Thailand",z:[{"(GMT+07:00) Bangkok":"Asia/Bangkok"}]},TL:{n:"Timor-Leste",z:[{"(GMT+09:00) Dili":"Asia/Dili"}]},TG:{n:"Togo",z:[{"(GMT+00:00) Lome":"Africa/Lome"}]},TK:{n:"Tokelau",z:[{"(GMT+14:00) Fakaofo":"Pacific/Fakaofo"}]},TO:{n:"Tonga",z:[{"(GMT+13:00) Tongatapu":"Pacific/Tongatapu"}]},TT:{n:"Trinidad and Tobago",z:[{"(GMT-04:00) Port of Spain":"America/Port_of_Spain"}]},TN:{n:"Tunisia",z:[{"(GMT+01:00) Tunis":"Africa/Tunis"}]},TR:{n:"Turkey",z:[{"(GMT+02:00) Istanbul":"Europe/Istanbul"}]},TM:{n:"Turkmenistan",z:[{"(GMT+05:00) Ashgabat":"Asia/Ashgabat"}]},TC:{n:"Turks and Caicos Islands",z:[{"(GMT-05:00) Grand Turk":"America/Grand_Turk"}]},TV:{n:"Tuvalu",z:[{"(GMT+12:00) Funafuti":"Pacific/Funafuti"}]},UM:{n:"U.S. Minor Outlying Islands",z:[{"(GMT-11:00) Midway":"Pacific/Midway"},{"(GMT-10:00) Johnston":"Pacific/Johnston"},{"(GMT+12:00) Wake":"Pacific/Wake"}]},VI:{n:"U.S. Virgin Islands",z:[{"(GMT-04:00) St. Thomas":"America/St_Thomas"}]},UG:{n:"Uganda",z:[{"(GMT+03:00) Kampala":"Africa/Kampala"}]},UA:{n:"Ukraine",z:[{"(GMT+02:00) Kiev":"Europe/Kiev"}]},AE:{n:"United Arab Emirates",z:[{"(GMT+04:00) Dubai":"Asia/Dubai"}]},GB:{n:"United Kingdom",z:[{"(GMT+00:00) GMT (no daylight saving)":"Etc/GMT"},{"(GMT+00:00) London":"Europe/London"}]},US:{n:"United States",z:[{"(GMT-10:00) Hawaii Time":"Pacific/Honolulu"},{"(GMT-09:00) Alaska Time":"America/Anchorage"},{"(GMT-07:00) Mountain Time - Arizona":"America/Phoenix"},{"(GMT-08:00) Pacific Time":"America/Los_Angeles"},{"(GMT-07:00) Mountain Time":"America/Denver"},{"(GMT-06:00) Central Time":"America/Chicago"},{"(GMT-05:00) Eastern Time":"America/New_York"}]},UY:{n:"Uruguay",z:[{"(GMT-03:00) Montevideo":"America/Montevideo"}]},UZ:{n:"Uzbekistan",z:[{"(GMT+05:00) Tashkent":"Asia/Tashkent"}]},VU:{n:"Vanuatu",z:[{"(GMT+11:00) Efate":"Pacific/Efate"}]},VA:{n:"Vatican City",z:[{"(GMT+01:00) Rome":"Europe/Vatican"}]},VE:{n:"Venezuela",z:[{"(GMT-04:30) Caracas":"America/Caracas"}]},VN:{n:"Vietnam",z:[{"(GMT+07:00) Hanoi":"Asia/Saigon"}]},WF:{n:"Wallis and Futuna",z:[{"(GMT+12:00) Wallis":"Pacific/Wallis"}]},EH:{n:"Western Sahara",z:[{"(GMT+00:00) El Aaiun":"Africa/El_Aaiun"}]},YE:{n:"Yemen",z:[{"(GMT+03:00) Aden":"Asia/Aden"}]},ZM:{n:"Zambia",z:[{"(GMT+02:00) Lusaka":"Africa/Lusaka"}]},ZW:{n:"Zimbabwe",z:[{"(GMT+02:00) Harare":"Africa/Harare"}]}}},renderCommon:function(){function a(a){if(jQuery.isEmptyObject(countlyGlobal.apps))return e(),$("#no-app-warning").show(),!1;if(jQuery.isEmptyObject(countlyGlobal.admin_apps))return e(),!1;f(),countlyGlobal.admin_apps[a]?$("#delete-app").show():$("#delete-app").hide(),$("#new-install-overlay").is(":visible")&&($("#no-app-warning").hide(),$("#first-app-success").show(),$("#new-install-overlay").fadeOut(),countlyCommon.setActiveApp(a),$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"appimages/"+a+".png')"),$("#sidebar-app-select").find(".text").text(countlyGlobal.apps[a].name)),$("#app-edit-id").val(a),$("#view-app").find(".widget-header .title").text(countlyGlobal.apps[a].name),$("#app-edit-name").find(".read").text(countlyGlobal.apps[a].name),$("#app-edit-name").find(".edit input").val(countlyGlobal.apps[a].name),$("#view-app-key").text(countlyGlobal.apps[a].key),$("#view-app-id").text(a),$("#app-edit-category").find(".cly-select .text").text(g[countlyGlobal.apps[a].category]),$("#app-edit-category").find(".cly-select .text").data("value",countlyGlobal.apps[a].category),$("#app-edit-timezone").find(".cly-select .text").data("value",countlyGlobal.apps[a].timezone),$("#app-edit-category").find(".read").text(g[countlyGlobal.apps[a].category]),$("#app-edit-image").find(".read .logo").css({"background-image":'url("'+countlyGlobal.cdn+"appimages/"+a+'.png")'});for(var c=h[countlyGlobal.apps[a].country],d=0;d<c.z.length;d++)for(var i in c.z[d])if(c.z[d][i]==countlyGlobal.apps[a].timezone){var j=$("#app-edit-timezone").find(".read"),k=countlyGlobal.apps[a].country;j.find(".flag").css({"background-image":"url("+countlyGlobal.cdn+"images/flags/"+k.toLowerCase()+".png)"}),j.find(".country").text(c.n),j.find(".timezone").text(i),b("#app-edit-timezone",k,i,c.z[d][i]);break}}function b(a,b,c,d){$(a+" #timezone-select").hide(),$(a+" #selected").hide(),$(a+" #timezone-items").html(""),$(a+" #country-items").html("");var e=$(a+" #country-items"),f=$(a+" #timezone-items");for(var g in h)e.append("<div data-value='"+g+"' class='item'><div class='flag' style='background-image:url("+countlyGlobal.cdn+"images/flags/"+g.toLowerCase()+".png)'></div>"+h[g].n+"</div>");if(b&&c&&d){var i=h[b];if(1==i.z.length)for(var j in i.z[0])$(a+" #selected").show(),$(a+" #selected").text(j),$(a+" #app-timezone").val(i.z[0][j]),$(a+" #app-country").val(b),$(a+" #country-select .text").html("<div class='flag' style='background-image:url("+countlyGlobal.cdn+"images/flags/"+b.toLowerCase()+".png)'></div>"+i.n);else{$(a+" #timezone-select").find(".text").text(j);for(var k=i.z,l=0;l<k.length;l++)for(var j in k[l])f.append("<div data-value='"+k[l][j]+"' class='item'>"+j+"</div>");$(a+" #app-timezone").val(d),$(a+" #app-country").val(b),$(a+" #country-select .text").html("<div class='flag' style='background-image:url("+countlyGlobal.cdn+"images/flags/"+b.toLowerCase()+".png)'></div>"+i.n),$(a+" #timezone-select .text").text(c),$(a+" #timezone-select").show()}$(a+" .select-items .item").click(function(){var a=$(this).parents(".cly-select").find(".text");a.html($(this).html()),a.data("value",$(this).data("value"))}),$(a+" #timezone-items .item").click(function(){$(a+" #app-timezone").val($(this).data("value"))})}$(a+" #country-items .item").click(function(){$(a+" #selected").text(""),$(a+" #timezone-select").hide(),f.html("");var b=$(this).data("value"),c=h[b].z;if(1==c.length)for(var d in h[b].z[0])$(a+" #selected").show(),$(a+" #selected").text(d),$(a+" #app-timezone").val(h[b].z[0][d]),$(a+" #app-country").val(b);else{for(var e="",g=0;g<h[b].z.length;g++)for(var d in h[b].z[g])0==g&&($(a+" #timezone-select").find(".text").text(d),e=h[b].z[0][d],$(a+" #app-country").val(b)),f.append("<div data-value='"+h[b].z[g][d]+"' class='item'>"+d+"</div>");$(a+" #timezone-select").show(),$(a+" #app-timezone").val(e),$(a+" .select-items .item").click(function(){var a=$(this).parents(".cly-select").find(".text");a.html($(this).html()),a.data("value",$(this).data("value"))}),$(a+" #timezone-items .item").click(function(){$(a+" #app-timezone").val($(this).data("value"))})}})}function c(){$("#edit-app").removeClass("active"),$(".edit").hide(),$(".read").show(),$(".table-edit").hide(),$(".required").hide()}function d(){$("#app-add-name").val(""),$("#app-add-category").text(jQuery.i18n.map["management-applications.category.tip"]),$("#app-add-category").data("value",""),$("#app-add-timezone #selected").text(""),$("#app-add-timezone #selected").hide(),$("#app-add-timezone .text").html(jQuery.i18n.map["management-applications.time-zone.tip"]),$("#app-add-timezone .text").data("value",""),$("#app-add-timezone #app-timezone").val(""),$("#app-add-timezone #app-country").val(""),$("#app-add-timezone #timezone-select").hide(),$(".required").hide()}function e(){if($("#app-container-new").is(":visible"))return!1;$(".app-container").removeClass("active"),$("#first-app-success").hide(),c();var a=$("#manage-new-app>div").clone();a.attr("id","app-container-new"),a.addClass("active"),jQuery.isEmptyObject(countlyGlobal.apps)?$("#cancel-app-add").hide():$("#cancel-app-add").show(),$("#app-management-bar .scrollable").append(a),$("#add-new-app").show(),$("#view-app").hide();var d=jstz.determine().name();for(var e in h)for(var f=0;f<h[e].z.length;f++)for(var g in h[e].z[f])if(h[e].z[f][g]==d){b("#app-add-timezone",e,g,d);break}}function f(){$("#app-container-new").remove(),$("#add-new-app").hide(),d(),$("#view-app").show()}app.enableAppTooltip(),$(this.el).html(this.template({admin_apps:countlyGlobal.admin_apps}));var g=this.getAppCategories(),h=this.getTimeZones(),i=countlyCommon.ACTIVE_APP_ID;$("#app-management-bar .app-container").removeClass("active"),$("#app-management-bar .app-container[data-id='"+i+"']").addClass("active"),a(i),b("#app-add-timezone"),$("#clear-app-data").click(function(){$(this).hasClass("active")?($(this).removeClass("active"),$(".options").slideUp()):($(this).addClass("active"),$(".options").slideDown())}),$("#clear-data.options li").click(function(){$("#clear-app-data").removeClass("active"),$(".options").slideUp();var a=$(this).attr("id").replace("clear-","");CountlyHelpers.confirm(jQuery.i18n.map["management-applications.clear-confirm"],"red",function(b){if(!b)return!0;var c=$("#app-edit-id").val();$.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/reset",data:{args:JSON.stringify({app_id:c,period:a}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(b){return b?("all"==a&&(countlySession.reset(),countlyLocation.reset(),countlyCity.reset(),countlyUser.reset(),countlyDevice.reset(),countlyCarrier.reset(),countlyDeviceDetails.reset(),countlyAppVersion.reset(),countlyEvent.reset()),void CountlyHelpers.alert(jQuery.i18n.map["management-applications.clear-success"],"black")):(CountlyHelpers.alert(jQuery.i18n.map["management-applications.clear-admin"],"red"),!1)}})})}),$("#delete-app").click(function(){CountlyHelpers.confirm(jQuery.i18n.map["management-applications.delete-confirm"],"red",function(b){if(!b)return!0;var c=$("#app-edit-id").val();$.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/delete",data:{args:JSON.stringify({app_id:c}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(){delete countlyGlobal.apps[c],delete countlyGlobal.admin_apps[c];var b=$(".app-container").filter(function(){return $(this).data("id")&&$(this).data("id")==c}),d=b.prev().length?b.prev():b.next();a(d.data("id")),b.fadeOut("slow").remove(),_.isEmpty(countlyGlobal.apps)&&($("#new-install-overlay").show(),$("#sidebar-app-select .logo").css("background-image",""),$("#sidebar-app-select .text").text(""))},error:function(){CountlyHelpers.alert(jQuery.i18n.map["management-applications.delete-admin"],"red")}})})}),$("#edit-app").click(function(){$(".table-edit").is(":visible")?c():($(".edit").show(),$("#edit-app").addClass("active"),$(".read").hide(),$(".table-edit").show())}),$("#save-app-edit").click(function(){if($(this).hasClass("disabled"))return!1;var b=$("#app-edit-id").val(),d=$("#app-edit-name .edit input").val();$(".required").fadeOut().remove();var e=$("<span>").addClass("required").text("*");if(d||$("#app-edit-name .edit input").after(e.clone()),$(".required").length)return $(".required").fadeIn(),!1;var f=$("#add-edit-image-form").find("#app_image").val().split(".").pop().toLowerCase();return f&&-1==$.inArray(f,["gif","png","jpg","jpeg"])?(CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red"),!1):($(this).addClass("disabled"),void $.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/update",data:{args:JSON.stringify({app_id:b,name:d,category:$("#app-edit-category .cly-select .text").data("value")+"",timezone:$("#app-edit-timezone #app-timezone").val(),country:$("#app-edit-timezone #app-country").val()}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(e){for(var g in e)countlyGlobal.apps[b][g]=e[g],countlyGlobal.admin_apps[b][g]=e[g];if(!f){$("#save-app-edit").removeClass("disabled"),a(b),c(),$(".app-container").filter(function(){return $(this).data("id")&&$(this).data("id")==b}).find(".name").text(d);var h=$("#sidebar-app-select .logo").attr("style");return-1!==h.indexOf(b)&&$("#sidebar-app-select .text").text(d),!0}$("#add-edit-image-form").find("#app_image_id").val(b),$("#add-edit-image-form").ajaxSubmit({resetForm:!0,beforeSubmit:function(a){a.push({name:"_csrf",value:countlyGlobal.csrf_token})},success:function(e){$("#save-app-edit").removeClass("disabled");var f=$(".app-container").filter(function(){return $(this).data("id")&&$(this).data("id")==b});e?(f.find(".logo").css({"background-image":"url("+e+"?v"+(new Date).getTime()+")"}),$("#sidebar-app-select .logo").css("background-image",$("#sidebar-app-select .logo").css("background-image").replace(")","")+"?v"+(new Date).getTime()+")")):CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red"),a(b),c(),f.find(".name").text(d)}})}}))}),$("#cancel-app-edit").click(function(){c();var b=$("#app-edit-id").val();a(b)}),$(".app-container:not(#app-container-new)").live("click",function(){var b=$(this).data("id");c(),$(".app-container").removeClass("active"),$(this).addClass("active"),a(b)}),$("#add-app-button").click(function(){e()}),$("#cancel-app-add").click(function(){$("#app-container-new").remove(),$("#add-new-app").hide(),$("#view-app").show(),$(".new-app-name").text(jQuery.i18n.map["management-applications.my-new-app"]),d()}),$("#app-add-name").keyup(function(){var a=$(this).val();$("#app-container-new .name").text(a),$(".new-app-name").text(a)}),$("#save-app-add").click(function(){if($(this).hasClass("disabled"))return!1;var b=$("#app-add-name").val(),c=$("#app-add-category").data("value")+"",d=$("#app-add-timezone #app-timezone").val(),e=$("#app-add-timezone #app-country").val();$(".required").fadeOut().remove();var f=$("<span>").addClass("required").text("*");if(b||$("#app-add-name").after(f.clone()),c||$("#app-add-category").parents(".cly-select").after(f.clone()),d||$("#app-add-timezone #app-timezone").after(f.clone()),$(".required").length)return $(".required").fadeIn(),!1;var g=$("#add-app-image-form").find("#app_image").val().split(".").pop().toLowerCase();return g&&-1==$.inArray(g,["gif","png","jpg","jpeg"])?(CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red"),!1):($(this).addClass("disabled"),void $.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/create",data:{args:JSON.stringify({name:b,category:c,timezone:d,country:e}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(b){var c=$("#sidebar-new-app>div").clone(),d={_id:b._id,name:b.name,key:b.key,category:b.category,timezone:b.timezone,country:b.country};countlyGlobal.apps[b._id]=d,countlyGlobal.admin_apps[b._id]=d;var e=$("#app-container-new");return e.data("id",b._id),e.data("key",b.key),e.removeAttr("id"),g?($("#add-app-image-form").find("#app_image_id").val(b._id),void $("#add-app-image-form").ajaxSubmit({resetForm:!0,beforeSubmit:function(a){a.push({name:"_csrf",value:countlyGlobal.csrf_token})},success:function(d){$("#save-app-add").removeClass("disabled"),d?(e.find(".logo").css({"background-image":"url("+d+")"}),c.find(".logo").css({"background-image":"url("+d+")"})):CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red"),c.find(".name").text(b.name),c.data("id",b._id),c.data("key",b.key),$("#app-nav .apps-scrollable").append(c),a(b._id)}})):($("#save-app-add").removeClass("disabled"),c.find(".name").text(b.name),c.data("id",b._id),c.data("key",b.key),$("#app-nav .apps-scrollable").append(c),a(b._id),!0)}}))})}}),window.ManageUsersView=countlyView.extend({template:null,initialize:function(){var a=this;T.render("templates/users",function(b){a.template=b})},renderCommon:function(){var a=this;$.ajax({url:countlyCommon.API_PARTS.users.r+"/all",
data:{api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(b){$("#content").html(a.template({users:b,apps:countlyGlobal.apps,is_global_admin:countlyGlobal.member.global_admin?!0:!1}))}})}}),window.EventsView=countlyView.extend({showOnGraph:2,beforeRender:function(){},initialize:function(){this.template=Handlebars.compile($("#template-events").html())},pageScript:function(){$(".event-container").unbind("click"),$(".segmentation-option").unbind("click"),$(".big-numbers").unbind("click");var a=this;$(".event-container").on("click",function(){var b=$(this).data("key");a.showOnGraph=2,$(".event-container").removeClass("active"),$(this).addClass("active"),countlyEvent.setActiveEvent(b,function(){a.refresh(!0)})}),$("#event-nav .event-container").mouseenter(function(){var a=$(this),b=a.find(".name");b[0].scrollWidth>b.innerWidth()&&($("#event-tooltip").html(a.clone()),$("#event-tooltip .event-container").removeClass("active"),$("#event-tooltip").css(a.offset()),$("#event-tooltip .name").css({width:"auto"}),$("#event-tooltip").show(),$("#event-tooltip").bind("click",function(){a.trigger("click")}))}),$("#event-tooltip").mouseleave(function(){$("#event-tooltip").is(":visible")&&($("#event-tooltip").hide(),$("#event-tooltip").unbind("click"))}),$(".segmentation-option").on("click",function(){var b=$(this).data("value");countlyEvent.setActiveSegmentation(b,function(){a.renderCommon(!0),newPage=$("<div>"+a.template(a.templateData)+"</div>"),$(a.el).find("#event-nav .scrollable").html(function(){return newPage.find("#event-nav .scrollable").html()}),$(a.el).find(".widget-footer").html(newPage.find(".widget-footer").html()),$(a.el).find("#edit-event-container").replaceWith(newPage.find("#edit-event-container"));var b=countlyEvent.getEventData();a.drawGraph(b),a.pageScript(),a.drawTable(b),app.localize()})}),$(".big-numbers").on("click",function(){if(2==$(".big-numbers.selected").length)a.showOnGraph=1-$(this).index();else if(1==$(".big-numbers.selected").length){if($(this).hasClass("selected"))return!0;a.showOnGraph=2}$(this).toggleClass("selected"),a.drawGraph(countlyEvent.getEventData())}),countlyGlobal.admin_apps[countlyCommon.ACTIVE_APP_ID]&&$("#edit-events-button").show()},drawGraph:function(a){2!=this.showOnGraph?($(".big-numbers").removeClass("selected"),$(".big-numbers").eq(this.showOnGraph).addClass("selected"),2==a.dataLevel?a.chartDP.dp=a.chartDP.dp.slice(this.showOnGraph,this.showOnGraph+1):a.chartDP=a.chartDP.slice(this.showOnGraph,this.showOnGraph+1)):$(".big-numbers").addClass("selected"),2==a.dataLevel?countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar",{series:{stack:null}}):countlyCommon.drawTimeGraph(a.chartDP,"#dashboard-graph")},drawTable:function(a){this.dtable&&this.dtable.fnDestroy&&this.dtable.fnDestroy(!0),$("#event-main").append('<table class="d-table" cellpadding="0" cellspacing="0"></table>');var b=[];b.push(countlyEvent.isSegmentedView()?{mData:"curr_segment",sTitle:jQuery.i18n.map["events.table.segmentation"]}:{mData:"date",sType:"customDate",sTitle:jQuery.i18n.map["common.date"]}),b.push({mData:"c",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:a.tableColumns[1]}),a.tableColumns[2]&&b.push({mData:"s",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:a.tableColumns[2]}),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:b})),$(".d-table").stickyTableHeaders()},getColumnCount:function(){return $(".dataTable").find("thead th").length},renderCommon:function(a){var b=countlyEvent.getEventData(),c=countlyEvent.getEventSummary(),d=this;return this.templateData={"page-title":b.eventName.toUpperCase(),"logo-class":"events",events:countlyEvent.getEvents(),"event-map":countlyEvent.getEventMap(),segmentations:countlyEvent.getEventSegmentations(),"active-segmentation":countlyEvent.getActiveSegmentation(),"big-numbers":c,"chart-data":{columnCount:b.tableColumns.length,columns:b.tableColumns,rows:b.chartData}},0==countlyEvent.getEvents().length?(window.location="dashboard#/",CountlyHelpers.alert(jQuery.i18n.map["events.no-event"],"black"),!0):void(a||($(this.el).html(this.template(this.templateData)),this.drawGraph(b),this.drawTable(b),this.pageScript(),$("#edit-events-button").on("click",function(){CountlyHelpers.popup("#edit-event-container","events"),$(".dialog #edit-event-table-container").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}),$(".dialog .events-table").sortable({items:"tr",revert:!0,handle:"td:first-child",helper:function(a,b){return b.children().each(function(){$(this).width($(this).width())}),b.addClass("moving"),b},cursor:"move",containment:"parent",tolerance:"pointer",placeholder:"event-row-placeholder",stop:function(a,b){b.item.removeClass("moving")}}),$(".dialog #events-save").on("click",function(){var a={},b=[];$(".dialog .events-table tbody tr").each(function(){var b=$(this);eventKey=b.find(".event-key").text(),b.find(".event-name").val()&&(a[eventKey]||(a[eventKey]={}),a[eventKey].name=b.find(".event-name").val()),b.find(".event-count").val()&&(a[eventKey]||(a[eventKey]={}),a[eventKey].count=b.find(".event-count").val()),b.find(".event-sum").val()&&(a[eventKey]||(a[eventKey]={}),a[eventKey].sum=b.find(".event-sum").val())}),$(".dialog .events-table").find(".event-key").each(function(){$(this).text()&&b.push($(this).text())}),$.ajax({type:"POST",url:countlyGlobal.path+"/events/map/edit",data:{app_id:countlyCommon.ACTIVE_APP_ID,event_map:a,event_order:b,_csrf:countlyGlobal.csrf_token},success:function(){d.refresh()}})}),$(".delete-event").on("click",function(){var a=$(this).data("event-key"),b=$(this).parents(".dialog");a&&CountlyHelpers.confirm(jQuery.i18n.prop("events.delete-confirm",a),"red",function(c){c&&$.ajax({type:"POST",url:countlyGlobal.path+"/events/delete",data:{event_key:a,app_id:countlyCommon.ACTIVE_APP_ID,_csrf:countlyGlobal.csrf_token},success:function(){countlyEvent.reset(),$.when(countlyEvent.initialize(!0)).then(function(){d.render()}),$(".dialog #edit-event-table-container tr").each(function(){if($(this).find(".delete-event").data("event-key")==a){var c=b.outerHeight()-$(this).outerHeight();$(this).remove(),b.css({height:c})}})}})})}),$(".delete-event-selected").on("click",function(){var a=($(this).data("event-key"),$(this).parents(".dialog"));CountlyHelpers.confirm(jQuery.i18n.prop("events.delete-confirm-many"),"red",function(b){if(b){var c,e=[],f={};$(".dialog .delete-event-check").each(function(){$(this).is(":checked")&&(c=$(this).data("event-key"),e.push(c),f[c]=!0)}),$.ajax({type:"POST",url:countlyGlobal.path+"/events/delete_multi",data:{events:JSON.stringify(e),app_id:countlyCommon.ACTIVE_APP_ID,_csrf:countlyGlobal.csrf_token},success:function(){countlyEvent.reset(),$.when(countlyEvent.initialize(!0)).then(function(){d.render()}),$(".dialog #edit-event-table-container tr").each(function(){if(f[$(this).find(".delete-event").data("event-key")]){var b=a.outerHeight()-$(this).outerHeight();$(this).remove(),a.css({height:b})}})}})}})})})))},refresh:function(a,b){var c=this;$.when(countlyEvent.initialize(a)).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0),newPage=$("<div>"+c.template(c.templateData)+"</div>"),$(c.el).find("#event-nav .scrollable").html(function(){return newPage.find("#event-nav .scrollable").html()}),b||($("#event-update-area .cly-select").length&&!a?($(c.el).find("#event-update-area .select-items").html(function(){return newPage.find("#event-update-area .select-items").html()}),$("#event-update-area .select-items>div").addClass("scroll-list"),$("#event-update-area .select-items").find(".scroll-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}),$(".select-items .item").click(function(){var a=$(this).parents(".cly-select").find(".text");a.text($(this).text()),a.data("value",$(this).data("value"))})):$(c.el).find("#event-update-area").replaceWith(newPage.find("#event-update-area"))),$(c.el).find(".widget-footer").html(newPage.find(".widget-footer").html()),$(c.el).find("#edit-event-container").replaceWith(newPage.find("#edit-event-container"));var d=countlyEvent.getEventData();c.drawGraph(d),c.pageScript(),a||b?c.drawTable(d):c.getColumnCount()!=d.tableColumns.length?c.drawTable(d):CountlyHelpers.refreshTable(c.dtable,d.chartData),app.localize()})}});var AppRouter=Backbone.Router.extend({routes:{"/":"dashboard","/analytics/sessions":"sessions","/analytics/countries":"countries","/analytics/users":"users","/analytics/loyalty":"loyalty","/analytics/devices":"devices","/analytics/platforms":"platforms","/analytics/versions":"versions","/analytics/carriers":"carriers","/analytics/frequency":"frequency","/analytics/events":"events","/analytics/resolutions":"resolutions","/analytics/durations":"durations","/all":"allapps","/manage/apps":"manageApps","/manage/users":"manageUsers","*path":"main"},activeView:null,dateToSelected:null,dateFromSelected:null,activeAppName:"",activeAppKey:"",main:function(){this.navigate("/",!0)},dashboard:function(){this.renderWhenReady(this.dashboardView)},sessions:function(){this.renderWhenReady(this.sessionView)},countries:function(){this.renderWhenReady(this.countriesView)},devices:function(){this.renderWhenReady(this.deviceView)},platforms:function(){this.renderWhenReady(this.platformView)},versions:function(){this.renderWhenReady(this.appVersionView)},users:function(){this.renderWhenReady(this.userView)},allapps:function(){this.renderWhenReady(this.allAppsView)},loyalty:function(){this.renderWhenReady(this.loyaltyView)},frequency:function(){this.renderWhenReady(this.frequencyView)},carriers:function(){this.renderWhenReady(this.carrierView)},manageApps:function(){this.renderWhenReady(this.manageAppsView)},manageUsers:function(){this.renderWhenReady(this.manageUsersView)},events:function(){this.renderWhenReady(this.eventsView)},resolutions:function(){this.renderWhenReady(this.resolutionsView)},durations:function(){this.renderWhenReady(this.durationsView)},refreshActiveView:function(){},renderWhenReady:function(a){if(this.activeView&&this.activeView.destroy(),this.activeView=a,clearInterval(this.refreshActiveView),_.isEmpty(countlyGlobal.apps))return"/manage/apps"!=Backbone.history.fragment?this.navigate("/manage/apps",!0):a.render(),!1;a.render();var b=this;this.refreshActiveView=setInterval(function(){if(b.activeView.refresh(),b.refreshScripts[Backbone.history.fragment])for(var a=0,c=b.refreshScripts[Backbone.history.fragment].length;c>a;a++)b.refreshScripts[Backbone.history.fragment][a]();if(b.refreshScripts["#"])for(var a=0,c=b.refreshScripts["#"].length;c>a;a++)b.refreshScripts["#"][a]()},countlyCommon.DASHBOARD_REFRESH_MS),countlyGlobal&&countlyGlobal.message&&CountlyHelpers.parseAndShowMsg(countlyGlobal.message)},initialize:function(){function a(a){if(-1!=a.indexOf(":")){if(-1!=a.indexOf(",")){a=a.replace(/,|:/g,"");var b=a.split(" ");return parseInt(1e6*(moment.monthsShort.indexOf(b[1])+1))+1e4*parseInt(b[0])+parseInt(b[2])}return parseInt(a.replace(":",""))}if(3==a.length)return moment.monthsShort.indexOf(a);a=a.replace(",","");var b=a.split(" ");return 3==b.length?1e4*parseInt(b[2])+parseInt(100*moment.monthsShort.indexOf(b[1]))+parseInt(b[0]):parseInt(100*moment.monthsShort.indexOf(b[1]))+parseInt(b[0])}function b(a){a=a.split("-")[0];var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(-1!=a.indexOf(":")){var c=a.split(" ")[1].split(",")[0];return a.replace(c,parseInt(b.indexOf(c))).replace(/[:, ]/g,"")}var d=a.split(" ");return d.length>1?parseInt(100*b.indexOf(d[1]))+parseInt(d[0]):d[0].replace(/[><]/g,"")}this.pageScripts={},this.refreshScripts={},this.dashboardView=new DashboardView,this.sessionView=new SessionView,this.countriesView=new CountriesView,this.userView=new UserView,this.allAppsView=new AllAppsView,this.loyaltyView=new LoyaltyView,this.deviceView=new DeviceView,this.platformView=new PlatformView,this.appVersionView=new AppVersionView,this.frequencyView=new FrequencyView,this.carrierView=new CarrierView,this.manageAppsView=new ManageAppsView,this.manageUsersView=new ManageUsersView,this.eventsView=new EventsView,this.resolutionsView=new ResolutionView,this.durationsView=new DurationView,Handlebars.registerPartial("date-selector",$("#template-date-selector").html()),Handlebars.registerPartial("timezones",$("#template-timezones").html()),Handlebars.registerPartial("app-categories",$("#template-app-categories").html()),Handlebars.registerHelper("eachOfObject",function(a,b){var c="";for(var d in a)c+=b.fn({property:d,value:a[d]});return c}),Handlebars.registerHelper("eachOfObjectValue",function(a,b){var c="";for(var d in a)c+=b.fn(a[d]);return c}),Handlebars.registerHelper("eachOfArray",function(a,b){for(var c="",d=0;d<a.length;d++)c+=b.fn({index:d,value:a[d]});return c}),Handlebars.registerHelper("prettyJSON",function(a){return JSON.stringify(a,void 0,4)}),Handlebars.registerHelper("getShortNumber",function(a){return countlyCommon.getShortNumber(a)}),Handlebars.registerHelper("getFormattedNumber",function(a){return isNaN(a)?a:(ret=parseFloat(parseFloat(a).toFixed(2).toString()).toString(),ret.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}),Handlebars.registerHelper("toUpperCase",function(a){return a.toUpperCase()}),Handlebars.registerHelper("appIdsToNames",function(a){return CountlyHelpers.appIdsToNames(a)}),Handlebars.registerHelper("forNumberOfTimes",function(a,b){for(var c="",d=0;a>d;d++)c+=b.fn({count:d+1});return c}),Handlebars.registerHelper("include",function(a,b){var c=Handlebars.partials[a],d=$.extend({},this,b.hash);return c(d)}),Handlebars.registerHelper("for",function(a,b,c,d){for(var e="",f=a;b>f;f+=c)e+=d.fn(f);return e}),Handlebars.registerHelper("ifCond",function(a,b,c,d){switch(b){case"==":return a==c?d.fn(this):d.inverse(this);case"!=":return a!=c?d.fn(this):d.inverse(this);case"===":return a===c?d.fn(this):d.inverse(this);case"<":return c>a?d.fn(this):d.inverse(this);case"<=":return c>=a?d.fn(this):d.inverse(this);case">":return a>c?d.fn(this):d.inverse(this);case">=":return a>=c?d.fn(this):d.inverse(this);case"&&":return a&&c?d.fn(this):d.inverse(this);case"||":return a||c?d.fn(this):d.inverse(this);default:return d.inverse(this)}}),Handlebars.registerHelper("formatTimeAgo",function(a){return countlyCommon.formatTimeAgo(parseInt(a)/1e3)}),jQuery.i18n.properties({name:"locale",cache:!0,language:countlyCommon.BROWSER_LANG_SHORT,path:[countlyGlobal.cdn+"localization/min/"],mode:"map"});var c=this;if($(document).ready(function(){if(CountlyHelpers.initializeSelect(),CountlyHelpers.initializeTextSelect(),CountlyHelpers.initializeHugeDropdown(),countlyGlobal.config.session_timeout){var a,b,d,e=!1,f=function(){$.ajax({url:countlyGlobal.path+"/session",success:function(a){"logout"==a?($("#user-logout").click(),window.location="/logout"):"success"==a&&(e=!1,setTimeout(function(){e=!0},Math.round(countlyGlobal.config.session_timeout/2)),g(countlyGlobal.config.session_timeout))}})},g=function(c){var e=c-6e4;a&&(clearTimeout(a),a=null),e>0&&(a=setTimeout(function(){CountlyHelpers.notify({title:jQuery.i18n.map["common.session-expiration"],message:jQuery.i18n.map["common.expire-minute"],info:jQuery.i18n.map["common.click-to-login"]})},e));var g=c-1e4;b&&(clearTimeout(b),b=null),g>0&&(b=setTimeout(function(){CountlyHelpers.notify({title:jQuery.i18n.map["common.session-expiration"],message:jQuery.i18n.map["common.expire-seconds"],info:jQuery.i18n.map["common.click-to-login"]})},g)),d&&(clearTimeout(d),d=null),d=setTimeout(function(){f()},c+1e3)};g(countlyGlobal.config.session_timeout),$(document).click(function(){e&&f()}),f()}var h=countlyCommon.getPeriod();"[object Array]"===Object.prototype.toString.call(h)&&2==h.length&&(c.dateFromSelected=countlyCommon.getPeriod()[0],c.dateToSelected=countlyCommon.getPeriod()[1]);try{moment.lang(countlyCommon.BROWSER_LANG_SHORT)}catch(i){moment.lang("en")}$(".reveal-language-menu").text(countlyCommon.BROWSER_LANG_SHORT.toUpperCase()),$(".apps-scrollable").sortable({items:".app-container.app-navigate",revert:!0,forcePlaceholderSize:!0,handle:".drag",containment:"parent",tolerance:"pointer",stop:function(){var a=[];$(".app-container.app-navigate").each(function(){$(this).data("id")&&a.push($(this).data("id"))}),$.ajax({type:"POST",url:countlyGlobal.path+"/dashboard/settings",data:{app_sort_list:a,_csrf:countlyGlobal.csrf_token},success:function(){}})}}),$("#sort-app-button").click(function(){$(".app-container.app-navigate .drag").fadeToggle(),setTimeout(function(){$(".app-container.app-navigate .drag").is(":visible")?c.disableAppTooltip():c.enableAppTooltip()},500)}),$(".app-navigate").live("click",function(){c.closeAppTooltip(),c.disableAppTooltip();var a=$(this).data("key"),b=$(this).data("id"),d=$(this).find(".name").text(),e=$(this).find(".logo").css("background-image"),f=$("#sidebar-app-select");return"allapps"==b?(window.location.hash="/all",f.removeClass("active"),$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),c.activeAppKey=a,setTimeout(function(){$("#sidebar-menu > .item").addClass("hide"),$("#management-menu").removeClass("hide"),$("#allapps-menu").removeClass("hide").css("display","block")},500),!1):($("#sidebar-menu > .item").removeClass("hide"),$("#allapps-menu").css("display","none"),"#/all"==window.location.hash.toString()&&(window.location.hash="/"),c.activeAppKey==a?(f.removeClass("active"),$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),!1):(c.activeAppName=d,c.activeAppKey=a,void $("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack",complete:function(){countlyCommon.setActiveApp(b),f.find(".text").text(d),f.find(".logo").css("background-image",e),f.removeClass("active"),c.activeView.appChanged()}})))}),$(document).on("mouseenter",".app-container",function(){if(c.appTooltip){var a=$(this),b=a.find(".name");b[0].scrollWidth>b.innerWidth()&&(a.parents("#app-nav").length?$("#app-tooltip").css("margin-left","21px"):$("#app-tooltip").css({"margin-left":"3px","padding-left":"1px"}),$("#app-tooltip").html(a.clone()),$("#app-tooltip .app-container").removeClass("active"),$("#app-tooltip").css(a.offset()),$("#app-tooltip .name").css({width:"auto"}),$("#app-tooltip").show(),$("#app-tooltip").bind("click",function(){a.trigger("click"),a.addClass("active")}))}}),$("#app-tooltip").mouseleave(function(){c.closeAppTooltip()}),$("#sidebar-events").click(function(a){$.when(countlyEvent.refreshEvents()).then(function(){0==countlyEvent.getEvents().length&&(CountlyHelpers.alert(jQuery.i18n.map["events.no-event"],"black"),a.stopImmediatePropagation(),a.preventDefault())})}),$("#sidebar-menu").on("click",".item",function(){var a=$(this).next(),b=$(this).hasClass("active");if(a.hasClass("sidebar-submenu")&&!b)a.slideToggle();else{$("#sidebar-menu>.item").removeClass("active"),$(this).addClass("active");var d=$(this).parent(".sidebar-submenu");d.prev(".item").addClass("active"),201==$("#app-nav").offset().left&&(c.closeAppTooltip(),$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),$("#sidebar-app-select").removeClass("active"))}}),$("#sidebar-menu").slimScroll({height:$(window).height()-123-96+"px",railVisible:!0,railColor:"#4CC04F",railOpacity:.2,color:"#4CC04F"}),$(window).resize(function(){$("#sidebar-menu").slimScroll({height:$(window).height()-123-96+"px"})}),$(".sidebar-submenu").on("click",".item",function(){return $(this).hasClass("disabled")?!0:(201==$("#app-nav").offset().left&&($("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),$("#sidebar-app-select").removeClass("active")),$(".sidebar-submenu .item").removeClass("active"),$(this).addClass("active"),void $(this).parent().prev(".item").addClass("active"))}),$("#sidebar-app-select").click(function(){if($(this).hasClass("disabled"))return!0;$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active"),$("#app-nav").show();var a=$("#app-nav").offset().left;201==a?$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack",complete:function(){c.disableAppTooltip()}}):$("#app-nav").animate({left:"201px"},{duration:500,easing:"easeOutBack",complete:function(){c.enableAppTooltip()}})}),$("#sidebar-bottom-container .reveal-menu").click(function(){$("#language-menu").hide(),$("#sidebar-bottom-container .menu").toggle()}),$("#sidebar-bottom-container .reveal-language-menu").click(function(){$("#sidebar-bottom-container .menu").hide(),$("#language-menu").toggle()}),$("#sidebar-bottom-container .item").click(function(){$("#sidebar-bottom-container .menu").hide(),$("#language-menu").hide()}),$("#language-menu .item").click(function(){var a=$(this).data("language-code"),b=a.toUpperCase();store.set("countly_lang",a),$(".reveal-language-menu").text(b),countlyCommon.BROWSER_LANG_SHORT=a,countlyCommon.BROWSER_LANG=a;try{moment.lang(countlyCommon.BROWSER_LANG_SHORT)}catch(d){moment.lang("en")}$("#date-to").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]),$("#date-from").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]),jQuery.i18n.properties({name:"locale",cache:!0,language:countlyCommon.BROWSER_LANG_SHORT,path:[countlyGlobal.cdn+"localization/min/"],mode:"map",callback:function(){$.when(countlyLocation.changeLanguage()).then(function(){c.activeView.render(),c.pageScript()})}})}),$("#account-settings").click(function(){CountlyHelpers.popup("#edit-account-details"),$(".dialog #username").val($("#menu-username").text()),$(".dialog #api-key").val($("#user-api-key").val())}),$("#save-account-details:not(.disabled)").live("click",function(){var a=$(".dialog #username").val(),b=$(".dialog #old_pwd").val(),c=$(".dialog #new_pwd").val(),d=$(".dialog #re_new_pwd").val();return c!=d?($(".dialog #settings-save-result").addClass("red").text(jQuery.i18n.map["user-settings.password-match"]),!0):($(this).addClass("disabled"),void $.ajax({type:"POST",url:countlyGlobal.path+"/user/settings",data:{username:a,old_pwd:b,new_pwd:c,_csrf:countlyGlobal.csrf_token},success:function(b){var c=$(".dialog #settings-save-result");"username-exists"==b?c.removeClass("green").addClass("red").text(jQuery.i18n.map["management-users.username.exists"]):b?(c.removeClass("red").addClass("green").text(jQuery.i18n.map["user-settings.success"]),$(".dialog #old_pwd").val(""),$(".dialog #new_pwd").val(""),$(".dialog #re_new_pwd").val(""),$("#menu-username").text(a)):c.removeClass("green").addClass("red").text(jQuery.i18n.map["user-settings.alert"]),$(".dialog #save-account-details").removeClass("disabled")}}))}),$(".apps-scrollable").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0});var j=_.once(function(){CountlyHelpers.alert(jQuery.i18n.map["help.help-mode-welcome"],"black")});$(".help-toggle, #help-toggle").click(function(a){a.stopPropagation(),$("#help-toggle").toggleClass("active"),app.tipsify($("#help-toggle").hasClass("active")),$("#help-toggle").hasClass("active")?(j(),$.idleTimer("destroy"),clearInterval(c.refreshActiveView)):(c.refreshActiveView=setInterval(function(){c.activeView.refresh()},countlyCommon.DASHBOARD_REFRESH_MS),$.idleTimer(countlyCommon.DASHBOARD_IDLE_MS))}),$("#user-logout").click(function(){store.remove("countly_active_app"),store.remove("countly_date"),store.remove("countly_location_city")}),$(".beta-button").click(function(){CountlyHelpers.alert("This feature is currently in beta so the data you see in this view might change or disappear into thin air.<br/><br/>If you find any bugs or have suggestions please let us know!<br/><br/><a style='font-weight:500;'>Captain Obvious:</a> You can use the message box that appears when you click the question mark on the bottom right corner of this page.","black")}),$("#content").on("click","#graph-note",function(){function a(){var a=$(".note-date:visible").val(),b=$(".note-date:visible").data("datepicker"),c=$.datepicker.parseDate(b.settings.dateFormat||$.datepicker._defaults.dateFormat,a,b.settings);$(".selected-date:visible").text(moment(c).format("D MMM YYYY")+", "+$(".time-picker:visible span.selected").text())}function b(a,b){var c=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes;if("create"==b)if(c)c[a.date_id]?countlyCommon.arrayAddUniq(c[a.date_id],a.note):c[a.date_id]=[a.note];else{var d={};d[a.date_id]=[a.note],countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes=d}else"delete"==b&&c&&c[a.date_id]&&(c[a.date_id]=_.without(c[a.date_id],a.note))}if(CountlyHelpers.popup("#graph-note-popup"),$(".note-date:visible").datepicker({numberOfMonths:1,showOtherMonths:!0,onSelect:function(){a()}}),$.datepicker.setDefaults($.datepicker.regional[""]),$(".note-date:visible").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]),$(".note-popup:visible .time-picker, .note-popup:visible .note-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}),$(".note-popup:visible .time-picker span").on("click",function(){$(".note-popup:visible .time-picker span").removeClass("selected"),$(this).addClass("selected"),a()}),$(".note-popup:visible .manage-notes-button").on("click",function(){$(".note-popup:visible .note-create").hide(),$(".note-popup:visible .note-manage").show(),$(".note-popup:visible .create-note-button").show(),$(this).hide(),$(".note-popup:visible .create-note").hide()}),$(".note-popup:visible .create-note-button").on("click",function(){$(".note-popup:visible .note-create").show(),$(".note-popup:visible .note-manage").hide(),$(".note-popup:visible .manage-notes-button").show(),$(this).hide(),$(".note-popup:visible .create-note").show()}),a(),countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID]&&countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes)for(var c=_.sortBy(_.keys(countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes),function(a){return-parseInt(a)}),d=0;d<c.length;d++)for(var e=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes[c[d]],f=0;f<e.length;f++)$(".note-popup:visible .note-list").append('<div class="note"><div class="date" data-dateid="'+c[d]+'">'+moment(c[d],"YYYYMMDDHH").format("D MMM YYYY, HH:mm")+'</div><div class="content">'+e[f]+'</div><div class="delete-note"><i class="fa fa-trash"></i></div></div>');$(".note-popup:visible .note").length||$(".note-popup:visible .manage-notes-button").hide(),$(".note-popup:visible .note-content").textcounter({max:50,countDown:!0,countDownText:"remaining "}),$(".note-popup:visible .note .delete-note").on("click",function(){var a=$(this).siblings(".date").data("dateid"),c=$(this).siblings(".content").text();$(this).parents(".note").fadeOut().remove(),$.ajax({type:"POST",url:countlyGlobal.path+"/graphnotes/delete",data:{app_id:countlyCommon.ACTIVE_APP_ID,date_id:a,note:c,_csrf:countlyGlobal.csrf_token},success:function(d){return 0==d?!1:(b({date_id:a,note:c},"delete"),void app.activeView.refresh())}}),$(".note-popup:visible .note").length||($(".note-popup:visible .create-note-button").trigger("click"),$(".note-popup:visible .manage-notes-button").hide())}),$(".note-popup:visible .create-note").on("click",function(){if($(this).hasClass("disabled"))return!0;$(this).addClass("disabled");var a=$(".note-date:visible").val(),c=$(".note-date:visible").data("datepicker"),d=$.datepicker.parseDate(c.settings.dateFormat||$.datepicker._defaults.dateFormat,a,c.settings),e=moment(moment(d).format("D MMM YYYY")+", "+$(".time-picker:visible span.selected").text(),"D MMM YYYY, HH:mm").format("YYYYMMDDHH"),f=$(".note-popup:visible .note-content").val();return f.length?($(".note-popup:visible .note-content").removeClass("required-border"),$.ajax({type:"POST",url:countlyGlobal.path+"/graphnotes/create",data:{app_id:countlyCommon.ACTIVE_APP_ID,date_id:e,note:f,_csrf:countlyGlobal.csrf_token},success:function(a){return 0==a?!1:(b({date_id:e,note:a},"create"),void app.activeView.refresh())}}),void $("#overlay").trigger("click")):($(".note-popup:visible .note-content").addClass("required-border"),$(this).removeClass("disabled"),!0)})})}),_.isEmpty(countlyGlobal.apps))$("#new-install-overlay").show();else if(countlyCommon.ACTIVE_APP_ID)$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"appimages/"+countlyCommon.ACTIVE_APP_ID+".png')"),$("#sidebar-app-select .text").text(countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].name),c.activeAppName=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].name;else for(var d in countlyGlobal.apps){countlyCommon.setActiveApp(d),c.activeAppName=countlyGlobal.apps[d].name;break}$.idleTimer(countlyCommon.DASHBOARD_IDLE_MS),$(document).bind("idle.idleTimer",function(){clearInterval(c.refreshActiveView)}),$(document).bind("active.idleTimer",function(){c.activeView.restart(),c.refreshActiveView=setInterval(function(){c.activeView.refresh()},countlyCommon.DASHBOARD_REFRESH_MS)}),$.fn.dataTableExt.oPagination.four_button={fnInit:function(a,b,c){nFirst=document.createElement("span"),nPrevious=document.createElement("span"),nNext=document.createElement("span"),nLast=document.createElement("span"),nFirst.innerHTML="<i class='fa fa-angle-double-left'></i>",nPrevious.innerHTML="<i class='fa fa-angle-left'></i>",nNext.innerHTML="<i class='fa fa-angle-right'></i>",nLast.innerHTML="<i class='fa fa-angle-double-right'></i>",nFirst.className="paginate_button first",nPrevious.className="paginate_button previous",nNext.className="paginate_button next",nLast.className="paginate_button last",b.appendChild(nFirst),b.appendChild(nPrevious),b.appendChild(nNext),b.appendChild(nLast),$(nFirst).click(function(){a.oApi._fnPageChange(a,"first"),c(a)}),$(nPrevious).click(function(){a.oApi._fnPageChange(a,"previous"),c(a)}),$(nNext).click(function(){a.oApi._fnPageChange(a,"next"),c(a)}),$(nLast).click(function(){a.oApi._fnPageChange(a,"last"),c(a)}),$(nFirst).bind("selectstart",function(){return!1}),$(nPrevious).bind("selectstart",function(){return!1}),$(nNext).bind("selectstart",function(){return!1}),$(nLast).bind("selectstart",function(){return!1})},fnUpdate:function(a){if(a.aanFeatures.p)for(var b=a.aanFeatures.p,c=0,d=b.length;d>c;c++){var e=b[c].getElementsByTagName("span");0===a._iDisplayStart?(e[0].className="paginate_disabled_previous",e[1].className="paginate_disabled_previous"):(e[0].className="paginate_enabled_previous",e[1].className="paginate_enabled_previous"),a.fnDisplayEnd()==a.fnRecordsDisplay()?(e[2].className="paginate_disabled_next",e[3].className="paginate_disabled_next"):(e[2].className="paginate_enabled_next",e[3].className="paginate_enabled_next")}}},$.fn.dataTableExt.oApi.fnStandingRedraw=function(a){if(a.oFeatures.bServerSide===!1){var b=a._iDisplayStart;a.oApi._fnReDraw(a),a._iDisplayStart=b,a.oApi._fnCalculateEnd(a)}a.oApi._fnDraw(a)},jQuery.fn.dataTableExt.oSort["customDate-asc"]=function(b,c){return b=a(b),c=a(c),c>b?-1:b>c?1:0},jQuery.fn.dataTableExt.oSort["customDate-desc"]=function(b,c){return b=a(b),c=a(c),c>b?1:b>c?-1:0},jQuery.fn.dataTableExt.oSort["dateRange-asc"]=function(a,c){return a=b(a),c=b(c),c>a?-1:a>c?1:0},jQuery.fn.dataTableExt.oSort["dateRange-desc"]=function(a,c){return a=b(a),c=b(c),c>a?1:a>c?-1:0},jQuery.fn.dataTableExt.oSort["percent-asc"]=function(a,b){return a=parseFloat($("<a></a>").html(a).text().replace("%","")),b=parseFloat($("<a></a>").html(b).text().replace("%","")),b>a?-1:a>b?1:0},jQuery.fn.dataTableExt.oSort["percent-desc"]=function(a,b){return a=parseFloat($("<a></a>").html(a).text().replace("%","")),b=parseFloat($("<a></a>").html(b).text().replace("%","")),b>a?1:a>b?-1:0},jQuery.fn.dataTableExt.oSort["formatted-num-asc"]=function(a,b){"use strict";var c=[],d=[];return a=a.replace(/[^\d\-\.\/]/g,""),b=b.replace(/[^\d\-\.\/]/g,""),a.indexOf("/")>=0&&(c=a.split("/"),a=parseInt(c[0],10)/parseInt(c[1],10)),b.indexOf("/")>=0&&(d=b.split("/"),b=parseInt(d[0],10)/parseInt(d[1],10)),a-b},jQuery.fn.dataTableExt.oSort["formatted-num-desc"]=function(a,b){"use strict";var c=[],d=[];return a=a.replace(/[^\d\-\.\/]/g,""),
b=b.replace(/[^\d\-\.\/]/g,""),a.indexOf("/")>=0&&(c=a.split("/"),a=parseInt(c[0],10)/parseInt(c[1],10)),b.indexOf("/")>=0&&(d=b.split("/"),b=parseInt(d[0],10)/parseInt(d[1],10)),b-a},jQuery.fn.dataTableExt.oSort["loyalty-asc"]=function(a,b){return a=countlyUser.getLoyaltyIndex(a),b=countlyUser.getLoyaltyIndex(b),b>a?-1:a>b?1:0},jQuery.fn.dataTableExt.oSort["loyalty-desc"]=function(a,b){return a=countlyUser.getLoyaltyIndex(a),b=countlyUser.getLoyaltyIndex(b),b>a?1:a>b?-1:0},jQuery.fn.dataTableExt.oSort["frequency-asc"]=function(a,b){return a=countlyUser.getFrequencyIndex(a),b=countlyUser.getFrequencyIndex(b),b>a?-1:a>b?1:0},jQuery.fn.dataTableExt.oSort["frequency-desc"]=function(a,b){return a=countlyUser.getFrequencyIndex(a),b=countlyUser.getFrequencyIndex(b),b>a?1:a>b?-1:0},jQuery.fn.dataTableExt.oSort["session-duration-asc"]=function(a,b){return a=countlySession.getDurationIndex(a),b=countlySession.getDurationIndex(b),b>a?-1:a>b?1:0},jQuery.fn.dataTableExt.oSort["session-duration-desc"]=function(a,b){return a=countlySession.getDurationIndex(a),b=countlySession.getDurationIndex(b),b>a?1:a>b?-1:0},$.extend($.fn.dataTable.defaults,{sDom:'<"dataTable-top"fpT>t<"dataTable-bottom"i>',bAutoWidth:!1,sPaginationType:"four_button",iDisplayLength:50,bDestroy:!0,bDeferRender:!0,oTableTools:{sSwfPath:countlyGlobal.cdn+"javascripts/dom/dataTables/swf/copy_csv_xls.swf",aButtons:[{sExtends:"csv",sButtonText:"Save to CSV",fnClick:function(a,b,c){for(var d=$(a).parents(".dataTables_wrapper").find(".dataTable").dataTable().fnSettings().aoColumns,e=this.fnGetTableData(b).split(/\r\n|\r|\n/g).join('","').split('","'),f="",g=0;g<e.length;g++){if(e[g]=e[g].replace('"',""),g>=d.length){var h=g%d.length;"formatted-num"==d[h].sType?e[g]=e[g].replace(/,/g,""):"percent"==d[h].sType&&(e[g]=e[g].replace("%",""))}f+=(g+1)%d.length==0?'"'+e[g]+'"\r\n':'"'+e[g]+'", '}this.fnSetText(c,f)}},{sExtends:"xls",sButtonText:"Save for Excel",fnClick:function(a,b,c){for(var d=$(a).parents(".dataTables_wrapper").find(".dataTable").dataTable().fnSettings().aoColumns,e=this.fnGetTableData(b).split(/\r\n|\r|\n/g).join("	").split("	"),f="",g=0;g<e.length;g++){if(g>=d.length){var h=g%d.length;"formatted-num"==d[h].sType?e[g]=parseFloat(e[g].replace(/,/g,"")).toLocaleString():"percent"==d[h].sType?e[g]=parseFloat(e[g].replace("%","")).toLocaleString():"numeric"==d[h].sType&&(e[g]=parseFloat(e[g]).toLocaleString())}f+=(g+1)%d.length==0?e[g]+"\r\n":e[g]+"	"}this.fnSetText(c,f)}}]},fnInitComplete:function(a){var b="<div class='save-table-data'><i class='fa fa-download'></i></div>",c="<div class='search-table-data'><i class='fa fa-search'></i></div>",d=$("#"+a.sTableId+"_wrapper");$(b).insertBefore(d.find(".DTTT_container")),$(c).insertBefore(d.find(".dataTables_filter")),d.find(".dataTables_filter").html(d.find(".dataTables_filter").find("input").attr("Placeholder","Search").clone(!0)),d.find(".save-table-data").on("click",function(){"hidden"==$(this).next(".DTTT_container").css("visibility")?$(this).next(".DTTT_container").css("visibility","visible"):$(this).next(".DTTT_container").css("visibility","hidden")}),d.find(".search-table-data").on("click",function(){$(this).next(".dataTables_filter").toggle(),$(this).next(".dataTables_filter").find("input").focus()}),d.css({"min-height":d.height()})}}),$.fn.dataTableExt.sErrMode="throw"},localize:function(a){var b={onlyFirstUpper:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},upper:function(a){return a.toUpperCase()}};(a?a.find("[data-help-localize]"):$("[data-help-localize]")).each(function(){var a=$(this);void 0!=a.data("help-localize")&&a.data("help",jQuery.i18n.map[a.data("help-localize")])}),(a?a.find("[data-localize]"):$("[data-localize]")).each(function(){var a=$(this),c=a.data("localize").split("!"),d="";d=2==c.length?b[c[0]]?b[c[0]](jQuery.i18n.map[c[1]]):jQuery.i18n.prop(c[0],jQuery.i18n.map[c[1]]):jQuery.i18n.map[a.data("localize")],a.is("input[type=text]")||a.is("input[type=password]")||a.is("textarea")?a.attr("placeholder",d):a.is("input[type=button]")||a.is("input[type=submit]")?a.attr("value",d):a.text(d)})},tipsify:function(a,b){var c=b?b.find(".help-zone-vs"):$(".help-zone-vs"),d=b?b.find(".help-zone-vb"):$(".help-zone-vb"),e=b?b.find(".help-zone-vs, .help-zone-vb"):$(".help-zone-vs, .help-zone-vb");d.tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")||""},fade:!0,offset:5,cssClass:"yellow",opacity:1,html:!0}),c.tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")||""},fade:!0,offset:5,cssClass:"yellow narrow",opacity:1,html:!0}),a?e.off("mouseenter mouseleave").on("mouseenter",function(){$(this).tipsy("show")}).on("mouseleave",function(){$(this).tipsy("hide")}):e.off("mouseenter mouseleave")},enableAppTooltip:function(){this.appTooltip=!0},disableAppTooltip:function(){this.appTooltip=!1},closeAppTooltip:function(){$("#app-tooltip").is(":visible")&&($("#app-tooltip").hide(),$("#app-tooltip").unbind("click"))},addPageScript:function(a,b){this.pageScripts[a]||(this.pageScripts[a]=[]),this.pageScripts[a].push(b)},addRefreshScript:function(a,b){this.refreshScripts[a]||(this.refreshScripts[a]=[]),this.refreshScripts[a].push(b)},pageScript:function(){$("#month").text(moment().year()),$("#day").text(moment().format("MMM")),$("#yesterday").text(moment().subtract("days",1).format("Do"));var a=this;$(document).ready(function(){$("#sidebar-menu").find("a").removeClass("active");var b=$("#sidebar-menu").find("a[href='#"+Backbone.history.fragment+"']");b.addClass("active");var c=b.parent(".sidebar-submenu");c.prev(".item").addClass("active"),b.not(":visible")&&c.slideDown(),$(".sidebar-submenu").not(c).slideUp();var d=countlyCommon.getPeriod();if("[object Array]"!==Object.prototype.toString.call(d)&&$("#"+d).addClass("active"),"/manage/apps"==Backbone.history.fragment||"/manage/account"==Backbone.history.fragment||"/manage/users"==Backbone.history.fragment?($("#sidebar-app-select").addClass("disabled"),$("#sidebar-app-select").removeClass("active")):$("#sidebar-app-select").removeClass("disabled"),a.pageScripts[Backbone.history.fragment])for(var e=0,f=a.pageScripts[Backbone.history.fragment].length;f>e;e++)a.pageScripts[Backbone.history.fragment][e]();for(var g in a.pageScripts)if("#"!==g&&-1!==g.indexOf("#")&&Backbone.history.fragment.match(g.replace(/#/g,"[A-Za-z_0-9]+")))for(var e=0,f=a.pageScripts[g].length;f>e;e++)a.pageScripts[g][e]();if(a.pageScripts["#"])for(var e=0,f=a.pageScripts["#"].length;f>e;e++)a.pageScripts["#"][e]();a.localize(),$("#help-toggle").hasClass("active")&&($(".help-zone-vb").tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")?$(this).data("help"):""},fade:!0,offset:5,cssClass:"yellow",opacity:1,html:!0}),$(".help-zone-vs").tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")?$(this).data("help"):""},fade:!0,offset:5,cssClass:"yellow narrow",opacity:1,html:!0}),$.idleTimer("destroy"),clearInterval(a.refreshActiveView),$(".help-zone-vs, .help-zone-vb").hover(function(){$(this).tipsy("show")},function(){$(this).tipsy("hide")})),$(".usparkline").peity("bar",{width:"100%",height:"30",colour:"#6BB96E",strokeColour:"#6BB96E",strokeWidth:2}),$(".dsparkline").peity("bar",{width:"100%",height:"30",colour:"#C94C4C",strokeColour:"#C94C4C",strokeWidth:2}),CountlyHelpers.setUpDateSelectors(a.activeView),$(window).click(function(){$("#date-picker").hide(),$(".cly-select").removeClass("active")}),$("#date-picker").click(function(a){a.stopPropagation()}),$("#date-picker-button").click(function(b){$("#date-picker").toggle(),a.dateToSelected?(h.datepicker("setDate",moment(a.dateToSelected).toDate()),i.datepicker("option","maxDate",moment(a.dateToSelected).toDate())):(a.dateToSelected=moment().toDate().getTime(),h.datepicker("setDate",moment().toDate()),i.datepicker("option","maxDate",moment(a.dateToSelected).toDate())),a.dateFromSelected?(i.datepicker("setDate",moment(a.dateFromSelected).toDate()),h.datepicker("option","minDate",moment(a.dateFromSelected).toDate())):(extendDate=moment(h.datepicker("getDate")).subtract("days",30).toDate(),i.datepicker("setDate",extendDate),a.dateFromSelected=moment(h.datepicker("getDate")).subtract("days",30).toDate().getTime(),h.datepicker("option","minDate",moment(a.dateFromSelected).toDate())),b.stopPropagation()});var h=$("#date-to").datepicker({numberOfMonths:1,showOtherMonths:!0,maxDate:moment().toDate(),onSelect:function(b){var c=$(this).data("datepicker"),d=$.datepicker.parseDate(c.settings.dateFormat||$.datepicker._defaults.dateFormat,b,c.settings),e=new Date(d.getTime()),f=e;f.getTime()<a.dateFromSelected&&(a.dateFromSelected=f.getTime()),i.datepicker("option","maxDate",f),a.dateToSelected=d.getTime()}}),i=$("#date-from").datepicker({numberOfMonths:1,showOtherMonths:!0,maxDate:moment().subtract("days",1).toDate(),onSelect:function(b){var c=$(this).data("datepicker"),d=$.datepicker.parseDate(c.settings.dateFormat||$.datepicker._defaults.dateFormat,b,c.settings),e=new Date(d.getTime()),f=e;f.getTime()>a.dateToSelected&&(a.dateToSelected=f.getTime()),h.datepicker("option","minDate",f),a.dateFromSelected=d.getTime()}});$.datepicker.setDefaults($.datepicker.regional[""]),$("#date-to").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]),$("#date-from").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]),$("#date-submit").click(function(){return a.dateFromSelected||a.dateToSelected?(countlyCommon.setPeriod([a.dateFromSelected,a.dateToSelected]),a.activeView.dateChanged(),void $(".date-selector").removeClass("selected").removeClass("active")):!1}),$(".scrollable").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}),$(".widget-header").noisy({intensity:.9,size:50,opacity:.04,monochrome:!0}),$(".checkbox").on("click",function(){$(this).toggleClass("checked")}),$(".resource-link").on("click",function(){$(this).data("link")&&CountlyHelpers.openResource($(this).data("link"))})})}}),app=new AppRouter;